(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"2Kkf":function(module,e,n){"use strict";var t=n("17x9"),a=n.n(t),i=n("MnCE"),r=n("8cuT"),o=n("qyGb"),s=n("fH9y"),c=n("Ezgt"),d=Object(i.b)(Object(i.c)({executeAction:a.a.func.isRequired}),Object(r.a)(["CourseStore"],(function(e,n){var t=e.CourseStore,a=n.executeAction,i=t.getCourseId(),r=t.getCourseSlug();return{refreshCourseProgress:function(){a(s.b,{courseId:i}),a(c.a,{courseId:i,refreshProgress:!0}),a(o.a,{courseSlug:r,refetch:!0})}}})));e.a=d},"46xw":function(module,exports,e){e("j5nu")},"5B3L":function(module,e,n){"use strict";var t,a=n("q1tI"),i=n.n(a),r=n("Y74u"),o=n("sQ/U"),s=n("QILm"),c=n.n(s),d=n("fsL8"),l=n.n(d),u=n("yXPU"),m=n.n(u),p=n("J4zp"),f=n.n(p),g=n("/MKj"),v=n("DU3t"),h=n("ANjH"),b=n("lSNA"),k=n.n(b),C=n("3tO9"),S=n.n(C),createReducer=function(e,n,t){return e[t.type]?e[t.type](n,t):n},y=n("fNnY"),O={showChat:!1,isFullScreen:!1,disabledInput:!1,messageLoader:!1},I=k()(k()(k()(k()(k()(k()({},y.v,(function(e){return e.isFullScreen?S()(S()({},e),{},{showChat:!e.showChat,isFullScreen:!1}):S()(S()({},e),{},{showChat:!e.showChat})})),y.p,(function(e){return S()(S()({},e),{},{showChat:!0})})),y.f,(function(e){return S()(S()({},e),{},{showChat:!1})})),y.w,(function(e){return S()(S()({},e),{},{isFullScreen:!e.isFullScreen})})),y.x,(function(e,n){var t=n.isDisabled;return S()(S()({},e),{},{disabledInput:t})})),y.i,(function(e,n){var t=n.messageLoader;return S()(S()({},e),{},{messageLoader:t})})),w={inputText:""},j=k()({},y.u,(function(e,n){return S()(S()({},e),{},{inputText:n.inputText})})),x=n("RIqP"),E=n.n(x),N=n("ntUh"),A=n("mtOI");function createNewMessage(e){var n=e.text,t=e.sender,a=e.id,i=e.clipRecommendations,r=e.userFeedback,o=e.timestamp,s=e.recommendedActions,c=e.action,d=e.navigationButtons;return{type:N.c.TEXT,component:A.f,text:n,sender:t,timestamp:o?new Date(o):new Date,showAvatar:!0,customId:a,unread:t===N.d.RESPONSE,clipRecommendations:i,userFeedback:r,recommendedActions:s,action:c,navigationButtons:d}}function createLinkSnippet(e,n){return{type:N.c.SNIPPET.LINK,component:A.k,title:e.title,link:e.link,target:e.target||"_blank",sender:N.d.RESPONSE,timestamp:new Date,showAvatar:!0,customId:n,unread:!0}}function createComponentMessage(e,n,t,a){return{type:N.c.CUSTOM_COMPONENT,component:e,props:n,sender:N.d.RESPONSE,timestamp:new Date,showAvatar:t,customId:a,unread:!0}}var T={messages:[],chatSessionId:null,historicalMessagesMap:{},badgeCount:0},R=(t={},k()(k()(k()(k()(k()(k()(k()(k()(k()(k()(t,y.y,(function(e,n){var t=n.messages.map((function(e){return createNewMessage(e)}));return S()(S()({},e),{},{messages:t,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",t))})})),y.d,(function(e,n){var t=n.text,a=n.id,i=n.timestamp,r=n.action,o=[].concat(E()(e.messages),[createNewMessage({text:t,sender:N.d.CLIENT,id:a,timestamp:i,action:r})]);return S()(S()({},e),{},{messages:o,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",o))})})),y.c,(function(e,n){var t=n.text,a=n.id,i=n.clipRecommendations,r=n.userFeedback,o=n.timestamp,s=n.recommendedActions,c=n.navigationButtons,d=[].concat(E()(e.messages),[createNewMessage({text:t,sender:N.d.RESPONSE,id:a,clipRecommendations:i,userFeedback:r,timestamp:o,recommendedActions:s,navigationButtons:c})]);return S()(S()({},e),{},{messages:d,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",d)),badgeCount:e.badgeCount+1})})),y.b,(function(e,n){var t=n.link,a=n.id,i=[].concat(E()(e.messages),[createLinkSnippet(t,a)]);return S()(S()({},e),{},{messages:i,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",i))})})),y.a,(function(e,n){var t=n.component,a=n.props,i=n.showAvatar,r=n.id,o=[].concat(E()(e.messages),[createComponentMessage(t,a,i,r)]);return S()(S()({},e),{},{messages:o,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",o))})})),y.h,(function(e){return S()(S()({},e),{},{messages:[],historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",[])),badgeCount:0})})),y.m,(function(e,n){var t=n.index;e.messages[t].showAvatar=!1;var a=e.historicalMessagesMap[e.chatSessionId||""];a&&(a[t].showAvatar=!1)})),y.g,(function(e,n){var t=n.count,a=n.id,i=a?e.messages.filter((function(_,n){var i=e.messages.findIndex((function(e){return e.customId===a}));return n<i-t+1||n>i})):e.messages.slice(0,e.messages.length-t);return S()(S()({},e),{},{messages:i,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",i)),badgeCount:i.filter((function(e){return e.unread})).length})})),y.q,(function(e,n){var t=n.count;return S()(S()({},e),{},{badgeCount:t})})),y.n,(function(e){var n=e.messages.map((function(e){return S()(S()({},e),{},{unread:!1})}));return S()(S()({},e),{},{messages:n,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",n)),badgeCount:0})})),k()(k()(k()(k()(t,y.j,(function(e,n){var t=n.id,a=e.messages.map((function(e){return S()(S()({},e),{},{userFeedback:t===e.customId?N.a.like:e.userFeedback})}));return S()(S()({},e),{},{messages:a,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",a))})})),y.k,(function(e,n){var t=n.id,a=e.messages.map((function(e){return S()(S()({},e),{},{userFeedback:t===e.customId?N.a.dislike:e.userFeedback})}));return S()(S()({},e),{},{messages:a,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",a))})})),y.l,(function(e,n){var t=n.id,a=e.messages.map((function(e){return S()(S()({},e),{},{userFeedback:t===e.customId?N.a.unset:e.userFeedback})}));return S()(S()({},e),{},{messages:a,historicalMessagesMap:S()(S()({},e.historicalMessagesMap),{},k()({},e.chatSessionId||"",a))})})),y.r,(function(e,n){var t=n.chatSessionId;return S()(S()({},e),{},{chatSessionId:t})}))),M={chatSessionId:void 0,chatSessionStorageKey:void 0,chatState:v.f.Active},P=k()(k()(k()(k()(k()({},y.o,(function(e){return S()(S()({},e),{},{chatSessionId:void 0,chatSessionStorageKey:void 0})})),y.e,(function(e){return S()(S()({},e),{},{chatSessionId:void 0,chatSessionStorageKey:void 0})})),y.r,(function(e,n){var t=n.chatSessionId;return S()(S()({},e),{},{chatSessionId:t})})),y.s,(function(e,n){return S()(S()({},e),{},{chatSessionStorageKey:n})})),y.t,(function(e,n){return S()(S()({},e),{},{chatState:n.chatState})})),F=h.b,L=Object(h.a)({behavior:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,n=arguments.length>1?arguments[1]:void 0;return createReducer(I,e,n)},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1?arguments[1]:void 0;return createReducer(R,e,n)},input:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;return createReducer(j,e,n)},sessionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,n=arguments.length>1?arguments[1]:void 0;return createReducer(P,e,n)}}),D=Object(h.c)(L,F()),B=n("6OIj"),H=n("xeAZ"),V=n.n(H),U=n("lX80"),q=n("Nbf1"),z=n("zXDh"),G=n("djba"),W=n("b+Bk"),Y=n.n(W),K=n("vDB9"),Q={get:function(e){var n=K.a.getItem(e,(function(e){return e}),"");return n&&"undefined"!==n?n:void 0},set:function(e,n){var t=n;K.a.setItem(e,t,(function(e){return e}))},clear:function(e){K.a.removeItem(e)}},J=n("saWA");function updateChatHistory(e){var n=J.w(e);D.dispatch(n)}function enableMsgLoader(e){D.dispatch(J.h(e))}function toggleInputDisabled(e){D.dispatch(J.v(e))}function dispatcher_setChatSessionId(e){D.dispatch(J.m(e))}function setChatState(e){D.dispatch(J.o(e))}function dispatcher_sendMessage(e){return _sendMessage.apply(this,arguments)}function _sendMessage(){return(_sendMessage=m()(l()().mark((function _callee(e){var n,t,a,i,r,o,s;return l()().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n=D.getState(),t=n.sessionState,a=t.chatSessionId,i=t.chatSessionStorageKey,r=t.chatState,o=new U.a,s=new q.a({uri:"/graphql-gateway?opname=AiCoach_CreateUserMessageAndReturnResponse",cache:o,headers:{"Accept-Language":Object(z.getIetfLanguageTag)()}}),""!==e.input.message.trim()){c.next=6;break}return c.abrupt("return",Promise.resolve(null));case 6:return d=e.input.message,l=void 0,u=void 0,m=e.input.action,D.dispatch(J.c(d,l,u,m)),enableMsgLoader(!0),c.abrupt("return",s.mutate({mutation:Y.a,variables:{input:S()(S()({},e.input),{},{chatSessionId:a}),clipRecommendationsEnabled:e.clipRecommendationsEnabled,recommendedActionsEnabled:e.recommendedActionsEnabled},context:{clientName:"gatewayGql"}}).then((function(n){var t=n.data,o=(null==t?void 0:t.AiCoach_CreateUserMessageAndReturnResponse)||{},s=o.messageByAiCoach,c=o.clipRecommendations,d=o.recommendedActions,l=o.navigationButtons,u=o.session||{},m=u.id,p=u.status;p&&r!==p&&setChatState(p),enableMsgLoader(!1),a||dispatcher_setChatSessionId(m);var f=null==i?void 0:i.chatSessionStorageKey;return!Q.get(f)&&m&&Q.set(f,m),null!=s&&s.message&&(D.dispatch(J.b(s.message,s.messageId,c,void 0,"",d,l)),Object(G.b)("receive_coach_response",{isCoachResponseSuccessful:!0,coach:S()({mode:e.input.mode},a&&{chatSessionId:a})})),t})));case 9:case"end":return c.stop()}var d,l,u,m}),_callee)})))).apply(this,arguments)}var Z=n("gtL6");function useChatHistory(e){var n=e.historyLimit,t=e.recommendedActionsEnabled,i=e.clipRecommendationsEnabled,r=e.skipStore,o=void 0!==r&&r,s=e.mode,c=Object(B.a)(),d=a.useState(!1),u=f()(d,2),p=u[0],g=u[1],v=a.useState(null),h=f()(v,2),b=h[0],k=h[1],C=!1,S=D.getState().sessionState.chatState,y=function(){var e=m()(l()().mark((function _callee(e){var a,r,d,u,m,p,f,v,h,b,y,O,I;return l()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return g(!0),l.prev=1,l.next=4,c.query({query:V.a,variables:{chatSessionId:e,limit:n,recommendedActionsEnabled:t,clipRecommendationsEnabled:i},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 4:if(m=l.sent,(p=null===(a=m.data.AiCoach)||void 0===a?void 0:a.queryByChatSessionId.session.status)&&p!==S&&!o&&setChatState(p),null===(r=m.data)||void 0===r||null===(d=r.AiCoach)||void 0===d||null===(u=d.queryByChatSessionId)||void 0===u||!u.elements){l.next=14;break}return b=null===(f=m.data)||void 0===f?void 0:null===(v=f.AiCoach)||void 0===v?void 0:null===(h=v.queryByChatSessionId)||void 0===h?void 0:h.elements,y=b.map((function(e){return e.senderType===N.d.CLIENT?{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt}:e.senderType===N.d.RESPONSE?{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt,clipRecommendations:e.clipRecommendations,userFeedback:e.userFeedback,recommendedActions:e.recommendedActions,navigationButtons:e.navigationButtons,structuredResponse:e.structuredResponse}:{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt}})),O=y.reverse(),o||updateChatHistory(O),g(!1),l.abrupt("return",O);case 14:return l.abrupt("return",[]);case 17:return l.prev=17,l.t0=l.catch(1),C&&(k(l.t0),g(!1)),I=l.t0,Object(Z.a)({error:I,source:"useChatHistory",coachMode:s}),l.abrupt("return",[]);case 23:case"end":return l.stop()}}),_callee,null,[[1,17]])})));return function(n){return e.apply(this,arguments)}}();return a.useEffect((function(){return C=!0,function(){C=!1}}),[]),{loading:p,error:b,refreshHistory:y}}var X,ee,ne,te,ae,ie,re,oe,se,ce,de,le,ue,me,pe,fe,ge,ve,he,be=n("kNe7"),ke=n("IyUU"),Ce=n.n(ke),Se=n("EBS+"),hooks_useCreateUserChatSession=function(e){var n=e.itemId,t=e.courseId,i=e.inAuthoringMode,r=Object(o.b)().id.toString(),s=Object(B.a)(),c=a.useState(!1),d=f()(c,2),u=d[0],p=d[1],g=a.useState(null),v=f()(g,2),h=v[0],b=v[1];return{getNewChatSessionId:function(){var e=m()(l()().mark((function _callee(e){var a,o,c,d,u,m,f;return l()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return a=Object(Se.e)(t,n,i),o="",p(!0),l.prev=3,l.next=6,s.mutate({mutation:Ce.a,variables:{input:{title:e||a,userId:r}},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 6:null!=(d=l.sent)&&null!==(c=d.data)&&void 0!==c&&c.AiCoach_CreateChatSession&&(o=null===(u=d.data)||void 0===u?void 0:null===(m=u.AiCoach_CreateChatSession)||void 0===m?void 0:m.id),p(!1),l.next=16;break;case 11:l.prev=11,l.t0=l.catch(3),f=l.t0,b(l.t0),Object(Se.b)({error:f,source:"useCreateUserChatSession"});case 16:return l.abrupt("return",o);case 17:case"end":return l.stop()}}),_callee,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),loading:u,error:h}},useStartNewChatSession_useStartNewChatSession=function(e){var n=e.itemId,t=e.courseId,i=e.inAuthoringMode,r=hooks_useCreateUserChatSession({itemId:n,courseId:t,inAuthoringMode:i}),o=r.getNewChatSessionId,s=r.error;return{startNewChatSession:a.useCallback(function(){var e=m()(l()().mark((function _callee(e){var n;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=void 0,a=D.getState().sessionState.chatSessionStorageKey,Q.clear(null==a?void 0:a.chatSessionStorageKey),D.dispatch(J.d()),setChatState(v.f.Active),t.next=3,o(e);case 3:return dispatcher_setChatSessionId(n=t.sent),D.dispatch(J.g()),t.abrupt("return",n);case 7:case"end":return t.stop()}var a}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[o]),error:s}},ye=n("Yql6"),Oe=n("oaVt"),useCoachItemSendMessage_handleMessageResponseError=function(e,n,t){var a,i,r,o,s,c,d,l;if(enableMsgLoader(!1),i={text:Object(N.g)()},r=i.text,o=i.id,s=i.clipRecommendations,c=i.userFeedback,d=i.timestamp,l=i.recommendedActions,D.dispatch(J.b(r,o,s,c,d,l)),e.graphQLErrors&&(null===(a=e.graphQLErrors)||void 0===a?void 0:a.length)>0){var u=e.graphQLErrors[0];u&&Object(Se.b)({error:u,source:"handleMessageResponseError"})}Object(G.b)("receive_coach_response",{isCoachResponseSuccessful:!1,coachResponseError:e.toString(),coach:S()({mode:Object(Se.a)(n)},t&&{chatSessionId:t})})},useCoachItemSendMessage_isCoachItemSummaryMessage=function(e){var n;return null===(n=e.recommendedActions)||void 0===n?void 0:n.some((function(e){return e.action===v.d.CoachItemSummary}))},useCoachItemSendMessage_getCoachItemSummaryRecommendedAction=function(e){return null==e?void 0:e.find((function(e){return e.action===v.d.CoachItemSummary}))},useCoachItemSendMessage_imStuckRecommendedAction=function(e){var n;return null==e?void 0:null===(n=e.filter((function(e){return e.action===v.d.CoachItemStuckContinue||e.action===v.d.CoachItemStuckEnd})))||void 0===n?void 0:n[0]},hooks_useCoachItemSendMessage=function(e){var n=e.authoringMode,t=e.courseraContext,i=e.endStateCallback,r=e.coachItemType,o=e.markItemComplete,s=t.courseId,c=t.itemId,d=Object(ye.a)(),u=Object(Se.a)(n),p=a.useCallback((function(){d("interact_coach",{coachInteractionType:"end_chat_session",coachAction:r===Oe.f.SocraticDialogue?"COACH_ITEM_END_DIALOGUE":"COACH_ITEM_END_ROLE_PLAY",coach:{mode:u},product:{type:"course",id:s||""},courseItem:{id:c||""}})}),[s,c,u,d,r]),f=a.useCallback(function(){var e=m()(l()().mark((function _callee(e){var a,s,c,d,u,m,f,g;return l()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(a="ACTIVE"===(null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.session.status),s="ENDED"===(null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.session.status),c=null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.recommendedActions,d=useCoachItemSendMessage_getCoachItemSummaryRecommendedAction(c),u=useCoachItemSendMessage_imStuckRecommendedAction(c),m=D.getState(),f=m.sessionState,g=f.chatSessionId,!d||!a){l.next=14;break}if(r!==Oe.f.SocraticDialogue){l.next=12;break}null==o||o(),l.next=14;break;case 12:return l.next=14,dispatcher_sendMessage(Object(Se.c)({message:d.actionMessage,action:d.action,chatSessionId:g,authoringMode:n,courseraContext:t}));case 14:s&&(p(),null==i||i()),toggleInputDisabled(!!u);case 16:case"end":return l.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[n,r,t,i,p,o]);return{sendMessage:a.useCallback(function(){var e=m()(l()().mark((function _callee2(e,a){var i,r,o,s;return l()().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return i=D.getState(),r=i.sessionState,o=r.chatSessionId,c.prev=2,c.next=5,dispatcher_sendMessage(Object(Se.c)({message:e,action:a,chatSessionId:o,authoringMode:n,courseraContext:t}));case 5:return s=c.sent,c.next=8,f(s);case 8:return c.abrupt("return",s);case 11:c.prev=11,c.t0=c.catch(2),useCoachItemSendMessage_handleMessageResponseError(c.t0,n,o);case 14:case"end":return c.stop()}}),_callee2,null,[[2,11]])})));return function(n,t){return e.apply(this,arguments)}}(),[n,t,f])}},Ie=n("P1ex"),we=n.n(Ie),hooks_useUserChatSessions=function(){var e=Object(o.b)().id.toString(),n=Object(B.a)(),t=a.useState(!1),i=f()(t,2),r=i[0],s=i[1],c=a.useState(null),d=f()(c,2),u=d[0],p=d[1];return{getUserSessions:function(){var t=m()(l()().mark((function _callee(){var t,a,i,r,o,c,d,u,m;return l()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=[],s(!0),l.prev=2,l.next=5,n.query({query:we.a,variables:{userId:e,limit:100},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 5:o=l.sent,null!==(a=o.data)&&void 0!==a&&null!==(i=a.AiCoach)&&void 0!==i&&null!==(r=i.queryChatSessionsByUserId)&&void 0!==r&&r.elements&&(t=null===(c=o.data)||void 0===c?void 0:null===(d=c.AiCoach)||void 0===d?void 0:null===(u=d.queryChatSessionsByUserId)||void 0===u?void 0:u.elements),s(!1),l.next=15;break;case 10:l.prev=10,l.t0=l.catch(2),m=l.t0,p(l.t0),Object(Se.b)({error:m,source:"useUserChatSessions"});case 15:return l.abrupt("return",t);case 16:case"end":return l.stop()}}),_callee,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),loading:r,error:u}},useDialogueCoachItemChat_wasDialogueSessionEndedByUser=function(e){return e.some((function(e){return e.text===be.l}))&&!e.some((function(e){return useCoachItemSendMessage_isCoachItemSummaryMessage(e)}))},contexts_useDialogueCoachItemChat=function(e){var n=e.courseId,t=e.itemId,i=e.authoringMode,r=e.courseraContext,o=a.useState(void 0),s=f()(o,2),c=s[0],d=s[1],u=a.useState(null),p=f()(u,2),g=p[0],h=p[1],b=a.useState(!1),k=f()(b,2),C=k[0],S=k[1],y=a.useState(!1),O=f()(y,2),I=O[0],w=O[1],j=void 0!==i,x=hooks_useUserChatSessions(),E=x.getUserSessions,N=x.error,A=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,mode:v.g.CoachItem})||{},T=A.refreshHistory,R=A.error,M=useStartNewChatSession_useStartNewChatSession({itemId:t,courseId:n,inAuthoringMode:j}),P=M.startNewChatSession,F=M.error,L=null;R||F||N?L={error:R||F||N,type:"API_FAIL"}:g&&(L={error:g,type:"NO_MESSAGES"});var B=C&&!L,H=a.useCallback(function(){var e=m()(l()().mark((function _callee(e,n){var t,a,o;return l()().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=D.getState(),a=t.sessionState,o=a.chatSessionId,s.prev=2,s.next=5,dispatcher_sendMessage(Object(Se.c)({message:e,action:n,chatSessionId:o,authoringMode:i,courseraContext:r}));case 5:return s.abrupt("return",s.sent);case 8:return s.prev=8,s.t0=s.catch(2),useCoachItemSendMessage_handleMessageResponseError(s.t0,i,o),s.abrupt("return",null);case 12:case"end":return s.stop()}}),_callee,null,[[2,8]])})));return function(n,t){return e.apply(this,arguments)}}(),[i,r]),V=a.useCallback(m()(l()().mark((function _callee2(){var e;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!D.getState().behavior.messageLoader){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,P();case 5:return e=n.sent,d(e),n.next=9,H(be.a,v.d.WelcomeMessage);case 9:w(!1);case 10:case"end":return n.stop()}}),_callee2)}))),[H,P]),U=a.useCallback(m()(l()().mark((function _callee3(){var e,a,i,r,o,s,c,d;return l()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,E();case 2:if(i=l.sent,!N){l.next=5;break}return l.abrupt("return");case 5:if(r=null==i?void 0:null===(e=i.filter((function(e){return e.title===Object(Se.e)(n,t,j)})))||void 0===e?void 0:e[0],o=null==r?void 0:r.id){l.next=11;break}return l.next=10,V();case 10:return l.abrupt("return");case 11:return dispatcher_setChatSessionId(o),l.next=14,null==T?void 0:T(o);case 14:s=D.getState(),null!=(c=s.messages)&&null!==(a=c.messages)&&void 0!==a&&a.length?w(useDialogueCoachItemChat_wasDialogueSessionEndedByUser(c.messages)):(d=new Error("No messages found in the chat history for the session ".concat(o)),Object(Se.b)({error:d,source:"loadingChatHistory"}),h(d),S(!1));case 16:case"end":return l.stop()}}),_callee3)}))),[N,n,T,E,j,t,S,V]),q=a.useCallback(m()(l()().mark((function _callee4(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,U();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(Se.b)({error:e.t0,source:"loadChatInternal"});case 9:S(!1);case 10:case"end":return e.stop()}}),_callee4,null,[[1,6]])}))),[U,S]);return{dialogueSessionId:c,error:L,startNewDialogueChat:V,loadChat:q,isLoading:B,sessionEndedByUser:I,onSessionEnded:function(){var e=D.getState().messages;w(useDialogueCoachItemChat_wasDialogueSessionEndedByUser(e.messages))}}},je=n("IWWe"),SidePanelPersistenceUtils_getSidePanelState=function(e){if(e){var n=je.a.getItem("sidePanelState",JSON.parse,{});return null==n?void 0:n[e]}},SidePanelPersistenceUtils_setSidePanelState=function(e,n,t){if(e&&n&&void 0!==t){var a=je.a.getItem("sidePanelState",JSON.parse,{}),i=S()(S()({},a||{}),{},k()({},e,S()(S()({},(null==a?void 0:a[e])||{}),{},k()(k()({},n,t),"timestamp",(new Date).toISOString()))));je.a.setItem("sidePanelState",i,JSON.stringify)}},SidePanelPersistenceUtils_clearSidePanelState=function(e){if(e){var n=je.a.getItem("sidePanelState",JSON.parse,{});null==n||delete n[e];var t=new Date;t.setDate(t.getDate()-7),Object.keys(n||{}).forEach((function(e){var a=null==n?void 0:n[e];null!=a&&a.timestamp&&(new Date(a.timestamp)<t&&(null==n||delete n[e]))})),je.a.setItem("sidePanelState",n,JSON.stringify)}},useRolePlayCoachItemChat_checkIfRolePlayEndedByUser=function(e){return!(!e||0===e.length)&&e.some((function(e){return"SYSTEM"===e.sender&&e.text===be.r}))},contexts_useRolePlayCoachItemChat=function(e){var n=e.courseId,t=e.itemId,i=e.authoringMode,r=e.courseraContext,o=a.useState(!1),s=f()(o,2),c=s[0],d=s[1],u=a.useState(void 0),p=f()(u,2),g=p[0],h=p[1],b=a.useState(),k=f()(b,2),C=k[0],S=k[1],y=a.useState(),O=f()(y,2),I=O[0],w=O[1],j=a.useState(null),x=f()(j,2),E=x[0],N=x[1],A=a.useState(null),T=f()(A,2),R=T[0],M=T[1],P=a.useState(null),F=f()(P,2),L=F[0],B=F[1],H=a.useState(!1),V=f()(H,2),U=V[0],q=V[1],z=a.useState(!1),G=f()(z,2),W=G[0],Y=G[1],K=void 0!==i,Q=Object(Se.l)(n,t,K),J=hooks_useUserChatSessions(),Z=J.getUserSessions,X=J.error,ee=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,mode:v.g.CoachItem})||{},ne=ee.refreshHistory,te=ee.error,ae=useStartNewChatSession_useStartNewChatSession({itemId:t,courseId:n,inAuthoringMode:K}).startNewChatSession,ie=null;(te||X)&&(ie={error:te||X,type:"API_FAIL"});var re=U&&!ie,oe=a.useCallback(function(){var e=m()(l()().mark((function _callee(e,n,t){return l()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",dispatcher_sendMessage(Object(Se.c)({message:n,action:t,chatSessionId:e,authoringMode:i,courseraContext:r})));case 1:case"end":return a.stop()}}),_callee)})));return function(n,t,a){return e.apply(this,arguments)}}(),[i,r]),se=a.useCallback(function(){var e=m()(l()().mark((function _callee2(e){return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oe(e,be.k,v.d.CoachItemGenerateScenario);case 2:return q(!1),d(!0),n.next=6,oe(e,be.j,v.d.CoachItemGenerateJson);case 6:d(!1);case 7:case"end":return n.stop()}}),_callee2)})));return function(n){return e.apply(this,arguments)}}(),[oe]),ce=a.useCallback((function(){SidePanelPersistenceUtils_clearSidePanelState(C),h(void 0),S(void 0),w(void 0),dispatcher_setChatSessionId(void 0),N(null),M(null),B(null)}),[C]),de=a.useCallback(m()(l()().mark((function _callee3(){var e;return l()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!U&&!c){a.next=3;break}return a.abrupt("return");case 3:return q(!0),ce(),a.next=7,ae(Object(Se.l)(n,t,K));case 7:if(e=a.sent){a.next=10;break}throw new Error("Error creating Role Play intro session");case 10:return h(e),a.next=13,se(e);case 13:q(!1),a.next=21;break;case 16:a.prev=16,a.t0=a.catch(0),Object(Se.b)({error:a.t0,source:"startNewRolePlayChat"}),N(a.t0),q(!1);case 21:case"end":return a.stop()}}),_callee3,null,[[0,16]])}))),[U,c,ce,q,ae,n,t,K,se]),le=a.useCallback(m()(l()().mark((function _callee4(){var e,a;return l()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,g){i.next=3;break}throw new Error("No intro session found for the Role Play");case 3:return e=Object(Se.m)(n,t,g,K),i.next=6,ae(e);case 6:if(a=i.sent){i.next=9;break}throw new Error("Error creating Role Play simulation session");case 9:return S(a),i.next=12,oe(a,be.a,v.d.WelcomeMessage);case 12:return i.abrupt("return",a);case 15:return i.prev=15,i.t0=i.catch(0),Object(Se.b)({error:i.t0,source:"startRolePlaySimulation"}),M(i.t0),i.abrupt("return","");case 20:case"end":return i.stop()}}),_callee4,null,[[0,15]])}))),[g,n,t,K,ae,oe]),ue=a.useCallback(m()(l()().mark((function _callee5(){var e,a,i,r,o;return l()().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,C){s.next=3;break}throw new Error("Error creating debrief session. Role Play simulation session id required.");case 3:try{e=D.getState(),a=e.messages,i=a.historicalMessagesMap[C],r=useRolePlayCoachItemChat_checkIfRolePlayEndedByUser(i||[]),Y(r)}catch(e){Object(Se.b)({error:e,source:"createRolePlayDebrief_messageCheck"})}return s.next=6,ae(Object(Se.j)(n,t,C,K));case 6:if(o=s.sent){s.next=9;break}throw new Error("Error creating Role Play debrief session");case 9:return w(o),s.next=12,oe(o,be.h,v.d.CoachItemGenerateFeedback);case 12:s.next=18;break;case 14:s.prev=14,s.t0=s.catch(0),Object(Se.b)({error:s.t0,source:"createRolePlayDebrief"}),B(s.t0);case 18:case"end":return s.stop()}}),_callee5,null,[[0,14]])}))),[K,n,t,C,oe,ae,Y]),me=a.useCallback(m()(l()().mark((function _callee6(){var e,a,i,r,o,s,c,d,u,m;return l()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Z();case 2:if(e=l.sent,!X){l.next=5;break}return l.abrupt("return");case 5:if(a=e.find((function(e){return e.title===Q})),i=null==a?void 0:a.id){l.next=12;break}return l.next=10,de();case 10:l.next=33;break;case 12:return h(i),dispatcher_setChatSessionId(i),l.next=16,null==ne?void 0:ne(i);case 16:if(o=Object(Se.m)(n,t,i,K),!(s=null===(r=e.filter((function(e){return e.title===o})))||void 0===r?void 0:r[0])){l.next=33;break}return S(s.id),dispatcher_setChatSessionId(s.id),l.next=23,null==ne?void 0:ne(s.id);case 23:if(c=l.sent,d=useRolePlayCoachItemChat_checkIfRolePlayEndedByUser(c||[]),Y(d),u=Object(Se.j)(n,t,s.id,K),!(m=e.find((function(e){return e.title===u})))){l.next=33;break}return w(m.id),dispatcher_setChatSessionId(m.id),l.next=33,null==ne?void 0:ne(m.id);case 33:case"end":return l.stop()}}),_callee6)}))),[Z,X,Q,de,ne,n,t,K,Y]),pe=a.useCallback(m()(l()().mark((function _callee7(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,me();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(Se.b)({error:e.t0,source:"loadChatInternal"});case 9:q(!1);case 10:case"end":return e.stop()}}),_callee7,null,[[1,6]])}))),[me,q]);return{isRolePlayJSONLoading:c,rolePlayIntroSessionId:g,rolePlaySimulationSessionId:C,rolePlayDebriefSessionId:I,startNewRolePlayChat:de,startRolePlaySimulation:le,createRolePlayDebrief:ue,loadChat:pe,isLoading:re,rolePlayIntroCreationError:E,rolePlaySimulationCreationError:R,rolePlayDebriefCreationError:L,chatHistoryLoadingError:te,chatLoadingError:ie,setRolePlayDebriefCreationError:B,isRolePlayEndedByUser:W,setIsRolePlayEndedByUser:Y}},xe=["children"],Ee=a.createContext(void 0),useCoachItemChatContext_CoachItemChatContextProvider=function(e){var n,t,i,r,o,s,d,u,p,h,b,k,C,S,y,O,I,w,j,x,E,N,A,T,R,M,P,F,L,B,H,V,U,q,z,G,W,Y,K,Q,J,Z,X,ee,ne,te,ae,ie=e.children,re=c()(e,xe),oe=(t=(n=re).courseId,i=n.courseBranchId,r=n.coachItemType,o=n.rolePlayAiPersonaTitle,s=n.itemId,d=n.authoringMode,u=n.authoringCourseBranchId,p=n.itemName,h=n.nextItemLink,b=n.onCloseChat,k=n.markItemComplete,C=n.authorCoachItemSyncNotification,S=a.useState(!1),y=f()(S,2),O=y[0],I=y[1],w=Object(Se.i)({authoringCourseBranchId:u,authoringMode:d,courseBranchId:i,courseId:t,itemId:s}),j=a.useMemo((function(){return{coach:{mode:v.g.CoachItem},product:{type:"course",id:t},courseItem:{id:s}}}),[t,s]),x=contexts_useDialogueCoachItemChat({courseId:t,itemId:s,authoringMode:d,courseraContext:w}),E=x.dialogueSessionId,N=x.error,A=x.startNewDialogueChat,T=x.loadChat,R=x.isLoading,M=x.sessionEndedByUser,P=x.onSessionEnded,F=contexts_useRolePlayCoachItemChat({courseId:t,itemId:s,authoringMode:d,courseraContext:w}),L=F.isRolePlayJSONLoading,B=F.rolePlayIntroSessionId,H=F.rolePlaySimulationSessionId,V=F.rolePlayDebriefSessionId,U=F.startNewRolePlayChat,q=F.startRolePlaySimulation,z=F.createRolePlayDebrief,G=F.loadChat,W=F.isLoading,Y=F.rolePlayIntroCreationError,K=F.rolePlaySimulationCreationError,Q=F.rolePlayDebriefCreationError,J=F.chatLoadingError,Z=F.setRolePlayDebriefCreationError,X=F.isRolePlayEndedByUser,ee=hooks_useCoachItemSendMessage({authoringMode:d,courseraContext:w,endStateCallback:r===Oe.f.RolePlay?z:P,coachItemType:r,markItemComplete:k}).sendMessage,ne=a.useCallback(m()(l()().mark((function _callee(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r===Oe.f.RolePlay?U():A();case 1:case"end":return e.stop()}}),_callee)}))),[r,A,U]),te=a.useCallback(m()(l()().mark((function _callee2(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==Oe.f.SocraticDialogue){e.next=5;break}return e.next=3,T();case 3:e.next=11;break;case 5:if(r!==Oe.f.RolePlay){e.next=10;break}return e.next=8,G();case 8:e.next=11;break;case 10:Object(Se.b)({error:new Error("Unknown coach item type: ".concat(r)),source:"loadChat"});case 11:case"end":return e.stop()}}),_callee2)}))),[r,T,G]),ae=a.useCallback((function(e){I(e),e||null==b||b()}),[b]),a.useMemo((function(){return{courseId:t,courseBranchId:i,itemId:s,coachItemType:r,rolePlayAiPersonaTitle:o,authoringMode:d,authoringCourseBranchId:u,trackingData:j,startNewChat:ne,startRolePlaySimulation:q,loadChat:te,chatIsOpen:O,setChatIsOpen:ae,itemName:p,sendMessage:ee,isDialogueLoading:R,dialogueError:N,isRolePlayJSONLoading:L,nextItemLink:h,dialogueSessionId:E,rolePlayIntroSessionId:B,rolePlaySimulationSessionId:H,rolePlayDebriefSessionId:V,authorCoachItemSyncNotification:C,rolePlayIntroCreationError:Y,rolePlaySimulationCreationError:K,rolePlayDebriefCreationError:Q,setRolePlayDebriefCreationError:Z,rolePlayChatLoadingError:J,isRolePlayLoading:W,createRolePlayDebrief:z,isRolePlayEndedByUser:X,dialogueSessionEndedByUser:M}}),[t,i,s,r,o,d,u,j,ne,q,te,O,ae,p,ee,R,N,L,h,E,B,H,V,C,Y,K,Q,Z,J,W,z,X,M]));return a.createElement(g.a,{store:D},a.createElement(Ee.Provider,{value:oe},ie))},useCoachItemChatContext_useCoachItemChatContext=function(){var e=a.useContext(Ee);if(!e)throw new Error("useCoachItemChatContext must be used within a LearnerCoachItemContextProvider");return e},_e=n("/FeB"),Ne=n.n(_e),hooks_useCoachRespondToUserMessage=function(e){var n=e.itemId,t=e.courseId,i=e.courseBranchId,r=e.authoringCourseBranchId,o=e.authoringMode,s=Object(B.a)(),c=a.useState(!1),d=f()(c,2),u=d[0],p=d[1],g=a.useState(null),v=f()(g,2),h=v[0],b=v[1],k=Object(Se.i)({authoringCourseBranchId:r,authoringMode:o,courseBranchId:i,courseId:t,itemId:n});return{sendResponse:function(){var e=m()(l()().mark((function _callee(e){var n,t,a,i,r,c,d,u,m;return l()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.chatSessionId,t=e.message,a=e.config,p(!0),l.prev=2,r=[],o&&r.push({contextKey:"additionalContext.coachItem.authoring",contextValue:o}),l.next=7,s.mutate({mutation:Ne.a,variables:{input:{chatSessionId:n,message:t,courseraContext:k,config:a,additionalContext:r}},context:{clientName:"gatewayGql"}});case 7:if(null==(c=l.sent)||null===(i=c.data)||void 0===i||!i.AiCoach_RespondToUserMessage){l.next=11;break}return p(!1),l.abrupt("return",null===(d=c.data)||void 0===d?void 0:null===(u=d.AiCoach_RespondToUserMessage)||void 0===u?void 0:u.messageByAiCoach);case 11:l.next=18;break;case 13:l.prev=13,l.t0=l.catch(2),m=l.t0,b(l.t0),Object(Se.b)({error:m,source:"useCoachRespondToUserMessage"});case 18:return l.abrupt("return",void 0);case 19:case"end":return l.stop()}}),_callee,null,[[2,13]])})));return function(n){return e.apply(this,arguments)}}(),loading:u,error:h}},Ae=["children"],Te=a.createContext(void 0),useRolePlayHintsContext_getRequestHintAction=function(e){return function(e){var n,t,a=2===e.length,i="text"===(null===(n=e[0])||void 0===n?void 0:n.type)&&e[0].text===be.a,r=(null===(t=e[1])||void 0===t?void 0:t.sender)===N.d.RESPONSE;return a&&i&&r}(e)?be.g:e.length>2?be.n:""},useRolePlayHintsContext_RolePlayHintsContextProvider=function(e){var n=e.children,t=function(e){var n=e.courseId,t=e.courseBranchId,i=e.itemId,r=e.authoringCourseBranchId,o=a.useState(!1),s=f()(o,2),c=s[0],d=s[1],u=a.useState(!1),p=f()(u,2),h=p[0],b=p[1],k=a.useState(void 0),C=f()(k,2),S=C[0],y=C[1],O=a.useState(void 0),I=f()(O,2),w=I[0],j=I[1],x=a.useState({}),N=f()(x,2),A=N[0],T=N[1],R=useCoachItemChatContext_useCoachItemChatContext(),M=R.rolePlaySimulationSessionId,P=R.authoringMode,F=a.useCallback((function(e){T(e),M&&SidePanelPersistenceUtils_setSidePanelState(M,"expandedHintMessages",e)}),[M]),L=hooks_useUserChatSessions().getUserSessions,D=void 0!==P,B=hooks_useCreateUserChatSession({itemId:i,courseId:n,inAuthoringMode:D}),H=B.getNewChatSessionId,V=B.error,U=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,skipStore:!0,mode:v.g.CoachItem})||{},q=U.refreshHistory,z=U.error,G=hooks_useCoachRespondToUserMessage({itemId:i,courseId:n,authoringMode:P,courseBranchId:t,authoringCourseBranchId:r}),W=G.sendResponse,Y=G.error,K=Object(g.c)((function(e){return{messages:M&&e.messages.historicalMessagesMap[M]||e.messages.messages}})).messages,Q=null;V||Y?Q={error:V||Y,type:"API_FAIL"}:z&&(Q={error:z,type:"NO_MESSAGES"});var J,Z=c&&!Q,X=h&&!Q;M&&(J=Object(Se.k)(n,i,M,D));var ee=a.useCallback(m()(l()().mark((function _callee(){var e,n,t,a,i,r;return l()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,d(!0),e=E()(w||[]),n=S){o.next=9;break}return o.next=7,H(J);case 7:n=o.sent,y(n);case 9:if(t=useRolePlayHintsContext_getRequestHintAction(K)){o.next=13;break}throw d(!1),new Error("Something went wrong on determining the right hint action");case 13:return o.next=15,W({chatSessionId:n,message:be.i,config:{coachActionId:t,coachModeId:be.q}});case 15:if(!(a=o.sent)){o.next=21;break}return e=[].concat(E()(e),[{messageId:a.messageId,referencedMessageId:(null===(i=a.structuredResponse)||void 0===i?void 0:i.referencedMessageId)||"",message:(null===(r=a.structuredResponse)||void 0===r?void 0:r.hint)||""}]),j(e),d(!1),o.abrupt("return",e);case 21:d(!1),o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),Object(Se.b)({error:o.t0,source:"requestNewHint"});case 27:return o.abrupt("return",w||[]);case 28:case"end":return o.stop()}}),_callee,null,[[0,24]])}))),[K,w,S,W,H,J]),ne=a.useCallback(m()(l()().mark((function _callee2(){var e,n,t,a,i;return l()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L();case 2:if((n=r.sent)&&J){r.next=5;break}return r.abrupt("return",[]);case 5:if(t=n.find((function(e){return e.title===J})),a=null==t?void 0:t.id){r.next=9;break}return r.abrupt("return",[]);case 9:return y(a),b(!0),r.next=13,null==q?void 0:q(a);case 13:if(r.t1=e=r.sent,r.t0=null===r.t1,r.t0){r.next=17;break}r.t0=void 0===e;case 17:if(!r.t0){r.next=21;break}r.t2=void 0,r.next=22;break;case 21:r.t2=e.filter((function(e){return"SYSTEM"===e.sender})).map((function(e){return{messageId:e.id,referencedMessageId:e.structuredResponse.referencedMessageId,message:e.structuredResponse.hint,userFeedback:e.userFeedback}}));case 22:return i=r.t2,j(i),b(!1),r.abrupt("return",i);case 26:case"end":return r.stop()}}),_callee2)}))),[q,L,J]),te=a.useCallback((function(){j(void 0),y(void 0)}),[j,y]);return a.useMemo((function(){return{courseId:n,courseBranchId:t,itemId:i,requestNewHint:ee,loadHints:ne,isLoadingNewHint:Z,isLoadingExistingHints:X,error:Q,hints:w,expandedHintMessages:A,setExpandedHintMessages:F,resetHintsChatSession:te}}),[n,t,i,ee,ne,Z,X,Q,w,A,F,te])}(c()(e,Ae));return a.createElement(Te.Provider,{value:t},n)},useRolePlayHintsContext_useRolePlayHintsContext=function(){var e=a.useContext(Te);if(!e)throw new Error("useRolePlayHintsContext must be used within a RolePlayHintsContext");return e},Re=["children"],Me=a.createContext(void 0),useRolePlayTasksContext_getTaskListWithProgress=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n.reduce((function(e,n){return S()(S()({},e),{},k()({},n.id,n.completed))}),{});return(null==e?void 0:e.map((function(e){var n;return S()(S()({},e),{},{completed:null!==(n=a[e.id])&&void 0!==n?n:t})})))||[]},useRolePlayTasksContext_getTaskDetailsFromChatHistory=function(e){var n=e.filter((function(e){return"SYSTEM"===e.sender})).reduce((function(e,n){var t,a;return null!==(t=n.structuredResponse)&&void 0!==t&&t.taskList&&(e.taskList=n.structuredResponse.taskList),null!==(a=n.structuredResponse)&&void 0!==a&&a.taskProgress&&(e.taskProgress=n.structuredResponse.taskProgress),e}),{taskList:[],taskProgress:[]}),t=e.some((function(e){var n;return"SYSTEM"===e.sender&&(null===(n=e.structuredResponse)||void 0===n?void 0:n.taskProgress)}));return S()(S()({},n),{},{isTaskProgressRecorded:t})},useRolePlayTasksContext_RolePlayTasksContextProvider=function(e){var n=e.children,t=function(e){var n=e.courseId,t=e.courseBranchId,i=e.itemId,r=e.authoringCourseBranchId,o=a.useState(!1),s=f()(o,2),c=s[0],d=s[1],u=a.useState(void 0),p=f()(u,2),g=p[0],h=p[1],b=a.useState(!1),k=f()(b,2),C=k[0],S=k[1],y=a.useState(""),O=f()(y,2),I=O[0],w=O[1],j=useCoachItemChatContext_useCoachItemChatContext().authoringMode,x=hooks_useUserChatSessions().getUserSessions,E=void 0!==j,N=hooks_useCoachRespondToUserMessage({itemId:i,courseId:n,authoringCourseBranchId:r,authoringMode:j,courseBranchId:t}),A=N.sendResponse,T=N.loading,R=N.error,M=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,skipStore:!0,mode:v.g.CoachItem})||{},P=M.refreshHistory,F=M.error,L=hooks_useCreateUserChatSession({itemId:i,courseId:n,inAuthoringMode:E}),D=L.getNewChatSessionId,B=L.error,H=null;(B||R||F)&&(H={error:B||R||F,type:"API_FAIL"});var V=c&&!H,U=a.useCallback(function(){var e=m()(l()().mark((function _callee(e){var t,a;return l()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(Se.n)(n,i,e,E),r.next=3,D(t);case 3:return a=r.sent,w(a),r.abrupt("return",a);case 6:case"end":return r.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[n,i,D,E]),q=a.useCallback(function(){var e=m()(l()().mark((function _callee2(e){var n,t,a,i,r;return l()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,U(e);case 2:return n=o.sent,w(n),o.next=6,A({chatSessionId:n,message:be.m,config:{coachActionId:be.w,coachModeId:be.q}});case 6:if(!(t=o.sent)){o.next=12;break}return i=(null===(a=t.structuredResponse)||void 0===a?void 0:a.taskList)||[],r=useRolePlayTasksContext_getTaskListWithProgress(i,[]),h(r),o.abrupt("return",r);case 12:return o.abrupt("return",[]);case 13:case"end":return o.stop()}}),_callee2)})));return function(n){return e.apply(this,arguments)}}(),[A,U]),z=a.useCallback(function(){var e=m()(l()().mark((function _callee3(e,n){var t,a,i,r;return l()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,e){o.next=3;break}throw new Error("rolePlayTaskChatSessionId is required to request task tracking");case 3:if(!n.every((function(e){return e.completed}))){o.next=7;break}return h(n),o.abrupt("return",n);case 7:return o.next=9,A({chatSessionId:e,message:be.m,config:{coachActionId:be.x,coachModeId:be.q}});case 9:if(!(t=o.sent)){o.next=15;break}return i=(null===(a=t.structuredResponse)||void 0===a?void 0:a.taskProgress)||[],r=useRolePlayTasksContext_getTaskListWithProgress(n,i,!0),h(r),o.abrupt("return",r);case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),Object(Se.b)({error:o.t0,source:"requestTaskTracking"});case 20:return o.abrupt("return",[]);case 21:case"end":return o.stop()}}),_callee3,null,[[0,17]])})));return function(n,t){return e.apply(this,arguments)}}(),[A]),G=a.useCallback((function(){d(!0),S(!0),h(void 0)}),[]),W=a.useCallback((function(){d(!1),S(!1)}),[]),Y=a.useCallback((function(){w("")}),[w]),K=a.useCallback(function(){var e=m()(l()().mark((function _callee4(e){var t,a,r,o,s,c,d,u,m,p;return l()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!C){l.next=2;break}return l.abrupt("return",[]);case 2:if(t=I){l.next=11;break}return a=Object(Se.n)(n,i,e,E),l.next=7,x();case 7:r=l.sent,o=null==r?void 0:r.find((function(e){return e.title===a})),t=(null==o?void 0:o.id)||"",w(t);case 11:if(t){l.next=13;break}return l.abrupt("return",[]);case 13:return l.next=15,null==P?void 0:P(t);case 15:if(l.t0=l.sent,l.t0){l.next=18;break}l.t0=[];case 18:return s=l.t0,c=useRolePlayTasksContext_getTaskDetailsFromChatHistory(s),d=c.taskList,u=c.taskProgress,m=c.isTaskProgressRecorded,p=useRolePlayTasksContext_getTaskListWithProgress(d,u,m),h(p),l.abrupt("return",p);case 23:case"end":return l.stop()}}),_callee4)})));return function(n){return e.apply(this,arguments)}}(),[C,P,I,n,i,E,x]),Q=a.useCallback((function(e){return G(),e().finally((function(){W()}))}),[G,W]);return a.useMemo((function(){return{requestTaskList:q,requestTaskTracking:z,loadTaskList:K,setShouldSkipChatHistory:S,withInitialTasksLoadingState:Q,shouldSkipChatHistory:C,isTaskListLoading:V,isTaskResponseLoading:T,error:H,tasks:g,taskChatSessionId:I,resetTaskChatSession:Y}}),[g,I,q,z,K,S,Q,C,Y,V,T,H])}(c()(e,Re));return a.createElement(Me.Provider,{value:t},n)},useRolePlayTasksContext_useRolePlayTasksContext=function(){var e=a.useContext(Me);if(!e)throw new Error("useRolePlayTasksContext must be used within a RolePlayTasksContext");return e},Pe=a.createContext(void 0),useSidePanelContext_useSidePanelContext=function(){var e=a.useContext(Pe);if(!e)throw new Error("useSidePanelContext must be used within a SidePanelProvider");return e},useSidePanelContext_SidePanelProvider=function(e){var n=e.children,t=e.selectedPanel,i=e.selectedPanelStatus,r=a.useState(null!=t?t:"overview"),o=f()(r,2),s=o[0],c=o[1],d=a.useState(null!=i?i:"expanded"),l=f()(d,2),u=l[0],m=l[1],p=a.useCallback((function(e,n){c(e),SidePanelPersistenceUtils_setSidePanelState(n,"selectedPanel",e)}),[]),g=a.useCallback((function(e,n){m(e),SidePanelPersistenceUtils_setSidePanelState(n,"selectedPanelStatus",e)}),[]),v=a.useMemo((function(){return{selectedPanelStatus:u,setSelectedPanelStatus:g,selectedPanel:s,setSelectedPanel:p}}),[u,s,g,p]);return a.createElement(Pe.Provider,{value:v},n)},Fe=n("VkAN"),Le=n.n(Fe),De=n("OhL7"),Be=n("FdHa"),He=n("6/Gu"),Ve=n("ZJgU"),Ue=n("mHyk"),qe=n("l1rq"),ze=n("loer"),Ge=n("RT5p"),We={instructions:Object(De.c)(X||(X=Le()(["\n    margin-bottom: var(--cds-spacing-600);\n  "]))),instructionsText:Object(De.c)(ee||(ee=Le()(["\n    margin-bottom: var(--cds-spacing-150);\n  "])))},components_LearnerOverview=function(e){var n=e.overviewInstructions,t=e.style,i=Object(Se.o)(n);return Object(De.d)(He.a,{css:[We.instructions,t]},i?Object(De.d)(ze.a,{cml:Ge.c.create(n)}):n.split("\n\n").map((function(e,n){return Object(De.d)(qe.a,{component:"p",key:"paragraph-".concat(n),css:We.instructionsText},e.split("\n").map((function(e,n,t){var i=n!==t.length-1;return Object(De.d)(a.Fragment,{key:e},e,i&&(ne||(ne=Object(De.d)("br",null))))})))})))},Ye=n("HulD"),Ke=n("TR2N"),Qe=n.n(Ke),components_NonStandardPromptWarning=function(e){var n=e.promptVersion,t=e.coachItemType;return n!==Object(Se.d)(t)&&Object(o.d)()?a.createElement(He.a,{item:!0,css:{marginBottom:"var(--cds-spacing-300)"}},a.createElement(Ye.a,{severity:"information",title:Qe()("Non-standard prompt in use")},Qe()("It looks like you're using prompt version #{chosenPromptVersion}, when the standard prompt version is currently #{standardPromptVersion}.",{chosenPromptVersion:n,standardPromptVersion:be.f}))):null},Je=n("vXr1"),$e=n("Gok7"),Ze=n("A0dR"),Xe=n("gKW9"),en=n.n(Xe),nn={completed:Object(De.c)(te||(te=Le()(["\n    "," {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  "])),Be.a.down("xs")),completedStateContainer:Object(De.c)(ae||(ae=Le()(["\n    display: flex;\n    padding: var(--cds-spacing-150);\n  "]))),completedIcon:Object(De.c)(ie||(ie=Le()(["\n    margin-right: var(--cds-spacing-50);\n  "]))),completedText:Object(De.c)(re||(re=Le()(["\n    margin-right: var(--cds-spacing-300);\n    margin-left: var(--cds-spacing-50);\n  "]))),nextItem:Object(De.c)(oe||(oe=Le()(["\n    "," {\n      margin-top: var(--cds-spacing-400);\n    }\n  "])),Be.a.down("xs"))},chat_view_MarkAsCompleteButton=function(e){var n=e.isComplete,t=e.variant,a=void 0===t?"primary":t,i=e.className,r=e.disabled,o=e.nextItem,s=e.markComplete,c=Object(Je.d)();return Object(De.d)("div",{"data-testid":"mark-as-complete-container",className:i},n?Object(De.d)(He.a,{container:!0,direction:"row","data-testid":"completed",css:nn.completed},Object(De.d)(He.a,{item:!0,container:!0,alignItems:"center","data-testid":"completed-state",css:nn.completedStateContainer},Object(De.d)(Ze.a,{size:"medium",color:"success","aria-hidden":!0,css:nn.completedIcon}),Object(De.d)("div",{role:"alert","aria-live":"polite"},Object(De.d)(qe.a,{variant:"subtitleMedium",color:"success",css:nn.completedText,component:"div"},Object(De.d)($e.a,{component:"span",className:"rc-A11yScreenReaderOnly"},en()("Item is completed.")),Object(De.d)("span",{"aria-hidden":!0},en()("Completed"))))),!!o&&Object(De.d)(He.a,{item:!0},Object(De.d)(Ue.a,{"data-testid":"next-item",css:nn.nextItem,variant:"primary",type:"submit",onClick:function(){o&&c(o.getLink())},trackingData:{button:{name:"coach_item_navigate_to_next_item"}}},en()("Go to next item")))):Object(De.d)(Ue.a,{"data-testid":"mark-complete",variant:a,type:"submit",disabled:r,onClick:s,trackingData:{button:{name:"coach_item_mark_complete"}}},en()("Mark as complete")))},tn={startButton:Object(De.c)(se||(se=Le()(["\n    margin-right: var(--cds-spacing-200);\n\n    "," {\n      margin-bottom: var(--cds-spacing-200);\n    }\n  "])),Be.a.down("xs"))},components_CoverPage=function(e){var n=e.instructions,t=e.markComplete,a=e.markStarted,i=e.isCompleted,r=e.isStarted,o=e.promptVersion,s=(e.children,useCoachItemChatContext_useCoachItemChatContext()),c=s.loadChat,d=s.setChatIsOpen,l=s.courseId,u=s.itemId,m=s.coachItemType,p=Object(Ue.e)(),f=function(e,n){return n?Qe()("View feedback"):e?Qe()("Continue Role Play"):Qe()("Get started")}(r,i);return Object(De.d)(He.a,null,Object(De.d)(components_NonStandardPromptWarning,{promptVersion:o,coachItemType:m}),m===Oe.f.SocraticDialogue&&n&&Object(De.d)(components_LearnerOverview,{overviewInstructions:n}),Object(De.d)(He.a,{container:!0},Object(De.d)(Ve.a,{variant:"primary",onClick:function(){p("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_START_CHAT_COVER_PAGE",coach:{mode:v.g.CoachItem},product:{type:"course",id:l},courseItem:{id:u,type:Object(Se.h)(m)}}),r||a(),c(),d(!0)},css:tn.startButton,"data-testid":"coach-item-start-button"},m===Oe.f.SocraticDialogue?Qe()("Open Dialogue"):f),Object(De.d)(chat_view_MarkAsCompleteButton,{isComplete:i,variant:"secondary",disabled:!r,markComplete:t})))},an=n("mIiF"),rn=n("gksZ"),on=n("sBcU"),sn=n("5x5m"),cn=n("cE3W"),dn=n("SUk0"),ln=n("Z3v1"),un=n("lPk7"),mn=n("TSYQ"),pn=n.n(mn),fn=(Object(De.c)(ce||(ce=Le()(["\n    height: 100%;\n  "]))),Object(De.c)(de||(de=Le()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: none;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Be.a.down("xs")),Object(De.c)(le||(le=Le()(["\n    flex-grow: 0;\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),Object(De.c)(ue||(ue=Le()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    position: relative;\n  "]))),Object(De.c)(me||(me=Le()(["\n    max-width: 770px;\n    margin: 0 auto;\n  "]))),Object(De.c)(pe||(pe=Le()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: 770px;\n    margin: 0 auto;\n    border-top: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),Object(De.c)(fe||(fe=Le()(["\n    flex-grow: 0;\n    max-width: 770px;\n    margin: 0 auto;\n  "]))),n("DxU6")),gn=n.n(fn);Object(De.c)(ge||(ge=Le()(["\n      .hide-smart-scroll-container,\n      .show-smart-scroll-container,\n      .SmartScrollWrapper {\n        z-index: -1 !important;\n      }\n    "]))),Object(De.c)(ve||(ve=Le()(["\n    "," {\n      .ai-course-coach-widget {\n        overflow: hidden;\n      }\n\n      .show-smart-scroll-container {\n        z-index: -1 !important;\n      }\n    }\n  "])),Be.a.down("xs")),Object(De.c)(he||(he=Le()(["\n    height: 100%;\n    border-radius: var(--cds-border-radius-200);\n    box-shadow: 0 4px 40px -8px var(--cds-color-darken-400), 0 4px 8px -8px var(--cds-color-darken-400);\n    overflow: hidden;\n  "])));var vn=n("L1vm"),hn=(n("zyGl"),n("Ji5S"));var bn,kn,Cn=n("cVIm"),Sn=n("fAYU");var yn,components_Footer=function(e){var n=e.coachPersona;return Object(De.d)(qe.a,{component:"p",variant:"bodySecondary",color:"supportText",css:Object(De.c)(bn||(bn=Le()(["\n        padding: var(--cds-spacing-200);\n      "])))},Object(De.d)(ln.FormattedMessage,{message:gn()("{coachPersonaName} is powered by AI. Please be aware that the AI may make mistakes, so review responses carefully and do not share any sensitive information. Your data will be handled in accordance with {privacyNotice}."),privacyNotice:Object(De.d)(Sn.a,{href:"".concat(Cn.a.url.base,"about/privacy?trk_ref=coach"),target:"_blank",rel:"noreferrer",css:Object(De.c)(kn||(kn=Le()(["\n              color: inherit !important;\n            "])))},gn()("Coursera's Privacy Notice")),coachPersonaName:(null==n?void 0:n.name)||"Coach"}))},On=n("0F5w");function LoadingView(e){var n=e.labelMessage||gn()("Recalling our chat...");return Object(De.d)("div",{css:Object(De.c)(yn||(yn=Le()(["\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        right: 50%;\n      "])))},Object(De.d)(On.a,{label:n}))}var In,wn,jn,xn=n("dhC9"),En=7,_n=7999,Nn={textBox:function(e){return Object(De.c)(In||(In=Le()(["\n    /* CDS overrides */\n    --cds-color-neutral-background-primary-weak: var(--cds-color-emphasis-neutral-background-xweak);\n    --cds-color-interactive-stroke-primary-focus: var(--cds-color-emphasis-primary-background-xxstrong);\n    --cds-color-interactive-stroke-primary-focus-invert: var(--cds-color-emphasis-primary-background-weak);\n\n    > label {\n      margin-bottom: 0;\n\n      /* visually hidden but required for a11y */\n      display: none;\n    }\n\n    /* CDS overrides for Coach */\n\n    .cds-text-field-root {\n      /* textField component */\n      border-radius: var(--cds-spacing-100);\n      background-color: var(--cds-color-neutral-background-primary-weak);\n\n      /* remove border on the input field */\n\n      .cds-input-notchedOutline {\n        border: none;\n      }\n\n      /* text color */\n\n      .cds-input-input {\n        color: var(--cds-color-grey-700);\n      }\n\n      /* send suffix icon */\n\n      .cds-inputAdornment-filled {\n        padding: 0;\n        border-radius: var(--cds-spacing-100);\n\n        svg path {\n          fill: ",";\n        }\n      }\n\n      /* hover state */\n\n      &:hover {\n        .cds-input-notchedOutline {\n          border: 1px solid var(--cds-color-blue-600);\n        }\n      }\n\n      /* focus state */\n\n      &.cds-input-focused {\n        background-color: var(--cds-color-emphasis-neutral-background-xweak) !important;\n\n        .cds-input-notchedOutline {\n          border: 0 solid transparent;\n        }\n\n        .cds-input-input::placeholder {\n          color: var(--cds-color-interactive-secondary-inactive);\n        }\n\n        /* focus ring */\n\n        ::before {\n          border-radius: var(--cds-spacing-100);\n        }\n      }\n\n      /* send icon focus ring */\n\n      .cds-buttonBase-focusVisible {\n        &::after {\n          top: 4px;\n          left: 4px;\n          right: 4px;\n          bottom: 4px;\n        }\n      }\n\n      /* disabled state */\n\n      &.cds-input-readOnly {\n        .cds-input-input::placeholder {\n          color: var(--cds-color-grey-100);\n        }\n\n        svg path {\n          fill: var(--cds-color-grey-100);\n        }\n      }\n    }\n  "])),e?"var(--cds-color-neutral-disabled-strong)":"var(--cds-color-emphasis-neutral-background-xxstrong)")},container:Object(De.c)(wn||(wn=Le()(["\n    padding: 0 var(--cds-spacing-200);\n  "])))};function Sender(e){var n,t=e.sendMessage,i=e.placeholder,r=e.disabledInput,o=e.autofocus,s=e.onTextInputChange,c=Object(g.c)((function(e){return{showChat:e.behavior.showChat,inputText:e.input.inputText,isMessageLoading:e.behavior.messageLoader}})),d=c.showChat,l=c.inputText,u=c.isMessageLoading,m=Object(a.useRef)(null),p=Object(a.useRef)(null),f=Object(vn.c)(),h=Object(Ue.e)(),b=null===(n=Object(dn.b)())||void 0===n?void 0:n.data;Object(a.useEffect)((function(){var e;d&&o&&(null===(e=m.current)||void 0===e||e.focus())}),[o,d]);var handleSendMessageClick=function(){l&&(t(l,v.d.TypedMessage),f({trackingData:{input_text:l,timestamp:Date.now()},trackingName:"ai_course_coach_chat_send_message",action:"click_send_message"}),b&&(h("interact_coach",S()(S()({coachInteractionType:"send_message",coach:{mode:b.mode}},b.courseId&&{product:{type:"course",id:b.courseId}}),b.itemId&&{courseItem:{id:b.itemId,type:b.itemType}})),h("send_coach_message",S()(S()({coachMessageText:l,coachMessageLength:l.length,coach:{mode:b.mode}},b.courseId&&{product:{type:"course",id:b.courseId}}),b.itemId&&{courseItem:{id:b.itemId,type:b.itemType}}))),D.dispatch(J.s("")))},handlePaste=function(e){var n,t=null==e?void 0:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");t&&f({trackingData:{input_text:t,timestamp:Date.now()},trackingName:"ai_course_coach_chat_paste_message",action:"paste_message"})};Object(a.useEffect)((function(){var e=null;return m.current&&(e=m.current).addEventListener("paste",handlePaste),function(){e&&e.removeEventListener("paste",handlePaste)}}),[]);var k={onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessageClick())}};return Object(De.d)("div",{ref:p,css:Nn.container},Object(De.d)("div",{className:pn()("coach-new-message",{"coach-message-disable":u||r})},Object(De.d)(xn.a,{fullWidth:!0,multiline:!0,minRows:1,maxRows:En,maxLength:_n,label:gn()("Ask #{coachName}",{coachName:"Coach"}),type:"text",readOnly:u||r,inputRef:m,placeholder:i,onChange:function(e){var n=e.target.value;s&&s(n),function(e){D.dispatch(J.s(e))}(n)},value:l,inputProps:k,css:Nn.textBox(!l),"data-testid":"coach-send-message",suffix:Object(De.d)(sn.d,{tooltip:gn()("Send message"),variant:"ghost",onClick:handleSendMessageClick,disabled:!l||u||r,"aria-label":gn()("Send message"),"data-testid":"coach-send-button",icon:jn||(jn=Object(De.d)(hn.h,null))})})))}var An,Tn,Rn,Mn,Pn,Fn,Ln,Dn,Bn,Hn=Object(a.forwardRef)(Sender),Vn=n("eX5Y"),Un={notificationOverlay:Object(De.c)(An||(An=Le()(["\n    position: absolute;\n    top: var(--cds-spacing-200);\n    left: var(--cds-spacing-200);\n    right: var(--cds-spacing-200);\n    z-index: 20;\n    pointer-events: auto;\n\n    "," {\n      left: var(--cds-spacing-100);\n      right: var(--cds-spacing-100);\n      top: var(--cds-spacing-100);\n    }\n  "])),Be.a.down("xs"))},components_NotificationOverlay=function(e){var n=e.children;return Object(De.d)("div",{css:Un.notificationOverlay},n)},qn=Object(De.c)(Tn||(Tn=Le()(["\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: var(--cds-color-grey-200);\n    border: 4px solid transparent;\n    border-radius: var(--cds-border-radius-50);\n    background-clip: content-box;\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: var(--cds-color-grey-200) transparent;\n  scrollbar-gutter: auto;\n"]))),zn={actions:Object(De.c)(Rn||(Rn=Le()(["\n    margin: 0 var(--cds-spacing-200);\n    display: flex;\n    gap: var(--cds-spacing-150);\n\n    "," {\n      flex-direction: column;\n\n      button {\n        width: 100%;\n        max-width: unset;\n      }\n    }\n  "])),Be.a.down("sm"))},chat_view_ChatCompleteActions=function(e){var n=e.chatHasEnded,t=e.onTryAgainClick,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.coachItemType,o=i.startNewChat,s=i.nextItemLink,c=i.authoringMode,d=i.courseId,l=i.itemId,u=i.setChatIsOpen,m=i.isRolePlayEndedByUser,p=i.dialogueSessionEndedByUser,f=Object(g.c)((function(e){return e.sessionState.chatState})),h=Object(Ue.e)(),b=Object(Je.d)(),navigateToNextItem=function(){s&&b(s)},onStartNewChatButtonClick=function(e){e&&h("interact_coach",{coachInteractionType:"click_action",coachAction:e,coach:{mode:v.g.CoachItem},product:{type:"course",id:d},courseItem:{id:l}}),o(),null==t||t()};return f===v.f.ChatLimitReached?Object(De.d)("div",{css:zn.actions},Object(De.d)(Ve.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_CHAT_LIMIT_REACHED_START_CHAT_INLINE")}},r===Oe.f.RolePlay?Qe()("Start a new session"):Qe()("Start a new chat"))):f===v.f.Ended||n?c?Object(De.d)("div",{css:zn.actions},Object(De.d)(Ve.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE")}},r===Oe.f.RolePlay?Qe()("Start a new session"):Qe()("Start a new chat"))):Object(De.d)("div",{css:zn.actions,"data-testid":"chat-end-buttons"},r===Oe.f.RolePlay&&Object(De.d)(Ue.a,{onClick:function(){m?onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE"):navigateToNextItem()},trackingData:{button:{name:m?"coach_item_start_new_chat_try_again":"coach_item_go_to_next_item"}}},m?Qe()("Try again"):Qe()("Go to next item")),r===Oe.f.SocraticDialogue&&(p?Object(De.d)(Ue.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE")},trackingData:{button:{name:"coach_item_start_new_chat_try_again"}}},Qe()("Try again")):Object(De.d)(a.Fragment,null,s?Object(De.d)(Ue.a,{onClick:navigateToNextItem,variant:"primary",trackingData:{button:{name:"coach_item_navigate_to_next_item_inline"}}},Qe()("Go to next item")):Object(De.d)(Ue.a,{trackingData:{button:{name:"coach_item_close_chat_inline"}},onClick:function(){return u(!1)},variant:"primary"},Qe()("Close chat")))),Object(De.d)(Ue.a,{variant:"ghost","data-pendo":r===Oe.f.RolePlay?be.s:be.p,trackingData:{button:{name:"coach_item_provide_feedback_inline"}}},Qe()("Tell us what you think"))):null},Gn=Object(De.c)(Mn||(Mn=Le()(["\n  margin-bottom: var(--cds-spacing-300);\n\n  > p {\n    margin-bottom: var(--cds-spacing-200);\n    text-align: center;\n    color: var(--cds-color-neutral-primary-weak);\n  }\n"]))),chat_view_ChatEndedMessage=function(){var e=function(e){switch(e){case v.f.Ended:return Qe()("The activity has ended.");case v.f.ChatLimitReached:return Qe()("Youve reached the chat limit.");default:return}}(Object(g.c)((function(e){return e.sessionState.chatState})));return e?Object(De.d)("div",{"data-testid":"chat-ended-message",css:Gn},Object(De.d)(qe.a,{component:"p"},e),Object(De.d)(qe.a,{component:"p"},Qe()("Start a new chat to clear your chat history and start fresh."))):null},Wn=n("2yix");function hasDialogueChatStarted(e){return(null==e?void 0:e.length)>2}var Yn,Kn,Qn,Jn,$n,Zn,Xn,et,nt,tt,at,it,rt,ot,st,ct,dt,lt,ut,mt,pt,ft,gt,vt,ht,bt,kt,Ct,St,yt,Ot,It,wt,jt,xt,Et,_t,Nt,At,Tt,Rt,Mt,Pt,Ft,Lt,Dt,Bt,Ht,Vt,Ut,qt,zt,Gt,Wt,Yt,Kt,Qt,Jt,$t,Zt,Xt,ea,na,ta,aa,ia,ra,oa={loadingContainer:Object(De.c)(Pn||(Pn=Le()(["\n    user-select: none; /* needed to prevent cursor from appearing as caret when clicked */\n    margin: 0 var(--cds-spacing-200);\n  "]))),senderContainer:Object(De.c)(Fn||(Fn=Le()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),be.b+"px"),chatActionContainer:Object(De.c)(Ln||(Ln=Le()(["\n    max-width: ",";\n    margin: var(--cds-spacing-200) auto 0;\n    flex-grow: 0;\n    width: 100%;\n  "])),be.b+"px"),startActionButton:Object(De.c)(Dn||(Dn=Le()(["\n    margin-left: var(--cds-spacing-200);\n  "]))),coachButton:Object(De.c)(Bn||(Bn=Le()(["\n    margin-left: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "])))},chat_view_DialogueChatActions=function(e){e.onClickEndDialogueButton;var n,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.dialogueError,i=t.isDialogueLoading,r=t.sendMessage,o=Object(g.c)((function(e){return e.sessionState})).chatState,s=Object(g.c)((function(e){var n=e.behavior;return{messages:e.messages,behavior:n,sessionState:e.sessionState}})),c=s.behavior,d=c.disabledInput,u=c.messageLoader,p=s.messages.messages,f=Qe()("Let's get started"),h=null==p?void 0:p[p.length-1],b=h&&useCoachItemSendMessage_isCoachItemSummaryMessage(h),k=o===v.f.Active,C=hasDialogueChatStarted(p),S=b&&k,y=function(){var e=m()(l()().mark((function _callee(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(be.l,v.d.CoachItemSummary);case 2:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=m()(l()().mark((function _callee2(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(f,v.d.CoachItemLetsGetStarted);case 2:case"end":return e.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();if(a)return null;if(i)return Object(De.d)("div",{css:oa.chatActionContainer},Object(De.d)(Wn.a,{variant:"rect",height:48,css:oa.loadingContainer}));if(S)return Object(De.d)("div",{"data-testid":"view-feedback-button",css:oa.chatActionContainer},Object(De.d)(Ue.a,{size:"medium",variant:"primary",onClick:y,css:oa.startActionButton,disabled:u,trackingData:{button:{name:"dialogue_item_view_your_feedback"}}},Qe()("View your Feedback")));if(!C){var I=null==p?void 0:p.find((function(e){return e.sender===v.h.System})),w=void 0!==(null==(n=null==I?void 0:I.recommendedActions)?void 0:n.find((function(e){return e.action===v.d.CoachItemLetsGetStarted})));return u||w?null:Object(De.d)("div",{css:oa.chatActionContainer},Object(De.d)(Ue.a,{size:"medium",variant:"primary",onClick:O,css:oa.startActionButton,disabled:u,trackingData:{button:{name:"coach_item_start_session"}}},Qe()("Start Dialogue")))}return k?Object(De.d)("div",{css:oa.senderContainer},Object(De.d)(Hn,{sendMessage:r,placeholder:Qe()("Message Coach"),disabledInput:d||!k,autofocus:!0})):null},sa=n("7NTc"),ca=n("rzCt"),da=n("fguj"),la=n("7NrJ"),ua=sa.a.HeadingGroup,ma=sa.a.Content,pa=sa.a.Actions,fa={introductoryText:Object(De.c)(Yn||(Yn=Le()(["\n    margin-bottom: var(--cds-spacing-200);\n  "]))),actionButtons:Object(De.c)(Kn||(Kn=Le()(["\n    padding-left: 0;\n  "])))},ga=function(e){return e.DEFAULT="DEFAULT",e.FEEL_STUCK="FEEL_STUCK",e.TECHNICAL_ISSUES="TECHNICAL_ISSUES",e.TIME_CONSTRAINT="TIME_CONSTRAINT",e.NOT_VALUABLE="NOT_VALUABLE",e.DISLIKE_ITEM_TYPE="DISLIKE_ITEM_TYPE",e}({}),chat_view_EndDialogueDialog=function(e){var n=e.onClose,t=e.isOpen,i=a.useState(ga.DEFAULT),r=f()(i,2),o=r[0],s=r[1],c=useCoachItemChatContext_useCoachItemChatContext().sendMessage,d=Object(Ue.e)();return Object(De.d)(sa.a,{open:t,onClose:n},Object(De.d)(ua,null,Qe()("Would you like to end this session?")),Object(De.d)(ma,null,Object(De.d)(qe.a,{css:fa.introductoryText,component:"p"},Qe()("Please note that you will not be able to resume it, but you can always start a new one from the beginning.")),Object(De.d)(ca.a,{label:Qe()("Reason for ending"),optional:!0,"data-testid":"end-dialogue-reason-select-field",placeholder:Qe()("Select a reason"),supportText:Qe()("We would appreciate your feedback to help us improve the experience."),onChange:function(e){var n=e.target.value;s(n)}},Object.values(ga).map((function(e){return Object(De.d)(da.a,{key:e,value:e},function(e){switch(e){case ga.FEEL_STUCK:return Qe()("I feel stuck and can't complete the activity");case ga.TECHNICAL_ISSUES:return Qe()("I'm experiencing technical issues");case ga.TIME_CONSTRAINT:return Qe()("I don't have time to finish");case ga.NOT_VALUABLE:return Qe()("This isn't engaging or valuable for me");case ga.DISLIKE_ITEM_TYPE:return Qe()("I'd prefer a different way to learn");case ga.DEFAULT:default:return Qe()("No reason provided")}}(e))}))),Object(De.d)(pa,{css:fa.actionButtons},Object(De.d)(la.a,{alternateButtonProps:{children:Qe()("Cancel"),variant:"secondary",onClick:n},primaryButtonProps:{children:Qe()("Yes, end the Dialogue"),onClick:function(){c(be.l,v.d.CoachItemStuckEnd),d("end_coach_item_session",{coachItemSessionEndReason:o,courseItem:{type:"dialogue"}}),n()}}}))))},va={root:Object(De.c)(Qn||(Qn=Le()(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n  "])))},chat_view_ErrorView=function(e){var n=e.error,t=a.useCallback((function(){return"NO_MESSAGES"===n.type?Qe()("Something went wrong in getting your previous chat. Please contact support for help, or start a new chat."):Qe()("Please refresh your page. If you continue to see this error, please contact support for help.")}),[n]);return Object(De.d)(qe.a,{component:"div",css:va.root},t())},ha={conversation:Object(De.c)(Jn||(Jn=Le()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: unset;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Be.a.down("xs")),messageContainer:Object(De.c)($n||($n=Le()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    height: 100%;\n    position: relative;\n\n    ","\n  "])),qn),messageContainerResponses:Object(De.c)(Zn||(Zn=Le()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),be.b+"px"),summarySectionDivider:Object(De.c)(Xn||(Xn=Le()(["\n    margin: var(--cds-spacing-200);\n    margin-bottom: var(--cds-spacing-400);\n  "]))),userHasLeftMessage:Object(De.c)(et||(et=Le()(["\n    padding: 0 var(--cds-spacing-200);\n    padding-bottom: var(--cds-spacing-200);\n  "]))),endStateContainer:Object(De.c)(nt||(nt=Le()(["\n    margin: 0 auto var(--cds-spacing-200);\n    width: 100%;\n  "]))),footerContainer:Object(De.c)(tt||(tt=Le()(["\n    flex-grow: 0;\n    width: 100%;\n    margin: 0 auto;\n    max-width: ",";\n  "])),be.b+"px")},chat_view_ChatConversation=function(){var e,n=useCoachItemChatContext_useCoachItemChatContext(),t=n.courseId,i=n.isDialogueLoading,r=n.dialogueError,s=n.sendMessage,c=n.dialogueSessionId,d=n.authorCoachItemSyncNotification,l=n.courseBranchId,u=a.useState(!1),m=f()(u,2),p=m[0],h=m[1],b=Object(g.c)((function(e){return{messages:e.messages,shouldShowMessageLoader:e.behavior.messageLoader}})).messages.messages,k=null==b?void 0:b.find((function(e){return e.text===be.l})),C=null==b?void 0:b[b.length-1],y=b.find((function(e){return useCoachItemSendMessage_isCoachItemSummaryMessage(e)})),O=null===(e=Object(dn.b)())||void 0===e?void 0:e.data,I=Object(Ue.f)("view_dialogue_messages",S()(S()({product:{type:"course",id:t}},(null==O?void 0:O.itemId)&&{courseItem:{id:null==O?void 0:O.itemId}}),l&&{courseBranch:{id:l}}),[t,null==O?void 0:O.itemId,l,i,r]),w=Object(o.b)().fullName,j=Object(Vn.a)(w),x=a.useRef(null);a.useEffect((function(){var e,n;k&&x.current&&(null===(e=(n=x.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[k]);var isSummaryMessage=function(e){return k&&e.customId!==k.customId&&e.customId===C.customId},onSendMessage=function(e,n){e.trim()&&s(e,n)},handleToggleEndDialogueDialog=function(){h(!p)};return Object(De.d)("div",{css:ha.conversation},d&&Object(De.d)(components_NotificationOverlay,null,d),Object(De.d)("div",{css:ha.messageContainer},i&&Object(De.d)(LoadingView,{labelMessage:Qe()("Loading...")}),r&&Object(De.d)(chat_view_ErrorView,{error:r}),Object(De.d)("div",{css:ha.messageContainerResponses},!i&&!r&&Object(De.d)("div",{ref:I},Object(De.d)(A.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:onSendMessage,courseId:t,hideMessage:function(e){var n=e.message;return!(0!==e.index&&n.action!==v.d.CoachItemSummary&&(null==n?void 0:n.text)!==be.l&&n.action!==v.d.CoachItemStuckEnd&&!isSummaryMessage(n))},chatSessionId:c,forceHideMessageLoader:!!k}),k&&Object(De.d)("div",{ref:x},y?Object(De.d)(un.a,{css:ha.summarySectionDivider,"data-testid":"summary-section-divider"}):Object(De.d)(qe.a,{component:"p",variant:"bodyPrimary",color:"supportText",css:ha.userHasLeftMessage},Object(De.d)(ln.FormattedMessage,{message:Qe()("{userFirstName} ended the dialogue."),userFirstName:j})),Object(De.d)(A.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:onSendMessage,courseId:t,hideMessage:function(e){var n=e.message;return!isSummaryMessage(n)},chatSessionId:c})),Object(De.d)("div",{css:ha.endStateContainer},at||(at=Object(De.d)(chat_view_ChatEndedMessage,null)),it||(it=Object(De.d)(chat_view_ChatCompleteActions,null)))))),Object(De.d)(chat_view_EndDialogueDialog,{onClose:handleToggleEndDialogueDialog,isOpen:p}),rt||(rt=Object(De.d)(un.a,{color:"light",orientation:"horizontal"})),Object(De.d)(chat_view_DialogueChatActions,{onClickEndDialogueButton:handleToggleEndDialogueDialog}),Object(De.d)("div",{css:ha.footerContainer},ot||(ot=Object(De.d)(components_Footer,null))))},ba={startActionButton:Object(De.c)(st||(st=Le()(["\n    margin-left: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatLearnerStartScenario=function(e){var n=e.onStartButtonClick,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.isRolePlayJSONLoading,i=t.startRolePlaySimulation,r=t.trackingData,o=useRolePlayTasksContext_useRolePlayTasksContext(),s=o.requestTaskList,c=o.withInitialTasksLoadingState,d=Object(Ue.e)(),u=function(){var e=m()(l()().mark((function _callee2(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("interact_coach",S()({coachInteractionType:"click_action",coachAction:v.d.CoachItemGenerateScenario},r)),e.next=3,c(m()(l()().mark((function _callee(){var e;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return");case 5:return null==n||n(e),t.next=8,s(e);case 8:case"end":return t.stop()}}),_callee)}))));case 3:case"end":return e.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();return Object(De.d)(Ve.a,{onClick:u,size:"medium",variant:"primary",loading:a,css:ba.startActionButton},Qe()("Start Role Play"))},chat_view_RolePlayChatSender=function(e){var n=e.coachPersona,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.rolePlayIntroSessionId,i=t.sendMessage,r=Object(g.c)((function(e){return e.sessionState})).chatSessionId,o=useRolePlayTasksContext_useRolePlayTasksContext(),s=o.taskChatSessionId,c=o.tasks,d=o.requestTaskTracking,u=Object(g.c)((function(e){return e.behavior})).disabledInput,p=function(){var e=m()(l()().mark((function _callee(e,n){return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e,n);case 2:if(null==c||!c.length){t.next=5;break}return t.next=5,d(s,c);case 5:case"end":return t.stop()}}),_callee)})));return function(n,t){return e.apply(this,arguments)}}();return Object(De.d)(Hn,{sendMessage:p,placeholder:Qe()("Message #{coachPersonaName}",{coachPersonaName:(null==n?void 0:n.name)||"Coach"}),disabledInput:u||r===a,autofocus:!0})},ka={loadingContainer:Object(De.c)(ct||(ct=Le()(["\n    user-select: none; /* needed to prevent cursor from appearing as caret when clicked */\n    margin: 0 var(--cds-spacing-200);\n  "]))),senderContainer:Object(De.c)(dt||(dt=Le()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),be.b+"px"),chatActionContainer:Object(De.c)(lt||(lt=Le()(["\n    max-width: ",";\n    margin: var(--cds-spacing-200) auto 0;\n    flex-grow: 0;\n    width: 100%;\n  "])),be.b+"px"),startActionButton:Object(De.c)(ut||(ut=Le()(["\n    margin-left: var(--cds-spacing-200);\n  "]))),coachButton:Object(De.c)(mt||(mt=Le()(["\n    margin-left: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatActions=function(e){var n=e.coachPersona,t=e.onStartButtonClick,a=e.onTryAgainClick,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.rolePlayChatLoadingError,o=i.isRolePlayLoading,s=i.rolePlaySimulationSessionId,c=i.rolePlayDebriefSessionId,d=i.rolePlayDebriefCreationError,u=i.rolePlaySimulationCreationError,p=i.rolePlayIntroCreationError,f=i.startRolePlaySimulation,h=i.isRolePlayJSONLoading,b=i.authoringMode,k=i.trackingData,C=Object(g.c)((function(e){return e.sessionState})),y=C.chatState,O=C.chatSessionId,I=Object(g.c)((function(e){return e.behavior})).messageLoader,w=useRolePlayTasksContext_useRolePlayTasksContext(),j=w.requestTaskList,x=w.withInitialTasksLoadingState,E=Object(Ue.e)(),N=O===c,A=y===v.f.Active,T=A&&!!s&&!N,R=A&&!s,M=!b,P=r||p||u||d,F=function(){var e=m()(l()().mark((function _callee2(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E("interact_coach",S()({coachInteractionType:"click_action",coachAction:v.d.CoachItemGenerateScenario},k)),e.next=3,x(m()(l()().mark((function _callee(){var e;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f();case 2:if(e=n.sent){n.next=5;break}return n.abrupt("return");case 5:return null==t||t(e),n.next=8,j(e);case 8:case"end":return n.stop()}}),_callee)}))));case 3:case"end":return e.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();return P?null:o?Object(De.d)("div",{css:ka.chatActionContainer},Object(De.d)(Wn.a,{variant:"rect",height:48,css:ka.loadingContainer})):R?Object(De.d)("div",{css:ka.chatActionContainer,"data-testid":"chat-start-button"},M?Object(De.d)(chat_view_RolePlayChatLearnerStartScenario,{onStartButtonClick:t}):Object(De.d)(Ve.a,{onClick:F,size:"medium",variant:"primary",loading:h,css:ka.startActionButton},Qe()("Start Role Play"))):T?Object(De.d)("div",{css:ka.senderContainer},Object(De.d)(chat_view_RolePlayChatSender,{coachPersona:n})):c?Object(De.d)("div",{css:ka.chatActionContainer},I?pt||(pt=Object(De.d)(Wn.a,{variant:"rect",height:48})):Object(De.d)(chat_view_ChatCompleteActions,{chatHasEnded:!0,onTryAgainClick:a})):null},Ca=sa.a.HeadingGroup,Sa=sa.a.Content,ya=sa.a.Actions,Oa={introductoryText:Object(De.c)(ft||(ft=Le()(["\n    margin-bottom: var(--cds-spacing-200);\n  "]))),actionButtons:Object(De.c)(gt||(gt=Le()(["\n    padding-left: 0;\n  "])))},Ia=function(e){return e.DEFAULT="DEFAULT",e.FEEL_STUCK="FEEL_STUCK",e.TECHNICAL_ISSUES="TECHNICAL_ISSUES",e.TIME_CONSTRAINT="TIME_CONSTRAINT",e.NOT_VALUABLE="NOT_VALUABLE",e.DISLIKE_ITEM_TYPE="DISLIKE_ITEM_TYPE",e}({}),EndRolePlayDialog_getEndRolePlayMessage=function(e){switch(e){case Ia.FEEL_STUCK:return Qe()("I feel stuck and can't complete the activity");case Ia.TECHNICAL_ISSUES:return Qe()("I'm experiencing technical issues");case Ia.TIME_CONSTRAINT:return Qe()("I don't have time to finish right now");case Ia.NOT_VALUABLE:return Qe()("This isn't engaging or valuable for me");case Ia.DISLIKE_ITEM_TYPE:return Qe()("I'd prefer a different way to learn");case Ia.DEFAULT:default:return Qe()("Reason not provided")}},chat_view_EndRolePlayDialog=function(e){var n=e.onClose,t=e.isOpen,i=a.useState(Ia.DEFAULT),r=f()(i,2),o=r[0],s=r[1],c=useCoachItemChatContext_useCoachItemChatContext(),d=c.sendMessage,u=c.trackingData,p=Object(Ue.e)(),g=function(){var e=m()(l()().mark((function _callee(){var e;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p("interact_coach",S()({coachInteractionType:"click_action",coachAction:v.d.CoachItemStuckEnd},u)),e=EndRolePlayDialog_getEndRolePlayMessage(o),d(e,v.d.CoachItemStuckEnd),n();case 4:case"end":return t.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(De.d)(sa.a,{open:t,onClose:n,"data-testid":"end-role-play-dialog"},Object(De.d)(Ca,null,Qe()("End the Role Play?")),Object(De.d)(Sa,null,Object(De.d)(qe.a,{css:Oa.introductoryText,component:"p"},Qe()("You'll get feedback based on your progress so far. You won't be able to resume, but you can try again from the beginning.")),Object(De.d)(ca.a,{label:Qe()("Reason for ending"),optional:!0,"data-testid":"end-role-play-reason-select-field",placeholder:Qe()("Select a reason"),supportText:Qe()("Please share why you're ending early to help us improve the experience."),onChange:function(e){var n=e.target.value;s(n)}},Object.values(Ia).map((function(e){return Object(De.d)(da.a,{key:e,value:e},EndRolePlayDialog_getEndRolePlayMessage(e))}))),Object(De.d)(ya,{css:Oa.actionButtons},Object(De.d)(la.a,{alternateButtonProps:{children:Qe()("Cancel"),variant:"secondary",onClick:n},primaryButtonProps:{children:Qe()("Yes, end the Role Play"),onClick:g}}))))},wa=n("nNSt"),ja={sessionTitle:Object(De.c)(vt||(vt=Le()(["\n    margin: var(--cds-spacing-600) 0;\n    padding-left: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatSession=function(e){var n=e.title,t=e.children;return Object(De.d)("div",null,Object(De.d)("div",{css:ja.sessionTitle},Object(De.d)(qe.a,{component:"h2",variant:"titleSmall"},n)),Object(De.d)("div",null,t))},xa={messageContainerResponses:Object(De.c)(ht||(ht=Le()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),be.b+"px"),notification:Object(De.c)(bt||(bt=Le()(["\n    margin-bottom: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayDebriefSession=function(e){var n=e.hideMessage,t=useCoachItemChatContext_useCoachItemChatContext(),i=t.courseId,r=t.rolePlayDebriefCreationError,o=t.rolePlayDebriefSessionId,s=t.startNewChat,c=t.sendMessage,d=t.createRolePlayDebrief,u=t.setRolePlayDebriefCreationError,p=t.trackingData,g=Object(Ue.e)(),v=a.useState(!0),h=f()(v,2),b=h[0],k=h[1],C=a.useRef(null);a.useEffect((function(){var e,n;C.current&&(null===(e=(n=C.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[o,r]);var y=function(){var e=m()(l()().mark((function _callee(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("interact_coach",S()(S()({},p),{},{coachInteractionType:"click_action",coachAction:"COACH_ITEM_DEBRIEF_REGENERATE_FEEDBACK"})),u(null),k(!1),e.next=5,d();case 5:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),handleStartNewChatClick=function(){g("interact_coach",S()(S()({},p),{},{coachInteractionType:"click_action",coachAction:"COACH_ITEM_DEBRIEF_ERROR_START_NEW_CHAT"})),s()};return r?Object(De.d)(a.Fragment,null,Object(De.d)("div",{ref:C,css:xa.messageContainerResponses},Object(De.d)(chat_view_RolePlayChatSession,{title:Qe()("Feedback session")},b?Object(De.d)(wa.a,{css:xa.notification,severity:"error",actions:Object(De.d)(la.a,{size:"small",primaryButtonProps:{children:"Regenerate response",onClick:y},alternateButtonProps:{variant:"ghost",children:"Start a new session",onClick:handleStartNewChatClick}})},Qe()("Something went wrong. Try regenerating the response, or start a new session.")):Object(De.d)(wa.a,{css:xa.notification,severity:"error",actions:Object(De.d)(Ve.a,{size:"small",onClick:handleStartNewChatClick},Qe()("Start a new session"))},Qe()("Something went wrong. Start a new session to try again"))))):o?Object(De.d)(a.Fragment,null,Object(De.d)("div",{ref:C,css:xa.messageContainerResponses},Object(De.d)(chat_view_RolePlayChatSession,{title:Qe()("Feedback session")},Object(De.d)(A.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:c,courseId:i,hideMessage:n,chatSessionId:o})))):null},Ea={messageContainerResponses:Object(De.c)(kt||(kt=Le()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),be.b+"px")},chat_view_RolePlayIntroSession=function(e){var n=e.hideMessage,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.courseId,i=t.trackingData,r=t.rolePlayIntroSessionId,o=t.rolePlayIntroCreationError,s=t.startNewChat,c=t.sendMessage,d=Object(Ue.e)();return o?Object(De.d)("div",{css:Ea.messageContainerResponses},Object(De.d)(chat_view_RolePlayChatSession,{title:Qe()("Get ready to step into character")},Object(De.d)(wa.a,{severity:"error",actions:Object(De.d)(Ve.a,{size:"small",onClick:function(){d("interact_coach",S()({coachInteractionType:"click_action",coachAction:"COACH_ITEM_INTRO_ERROR_START_NEW_CHAT"},i)),s()}},Qe()("Start a new session"))},Qe()("Something went wrong. Start a new session to try again")))):r?Object(De.d)("div",{css:Ea.messageContainerResponses},Object(De.d)(chat_view_RolePlayChatSession,{title:Qe()("Get ready to step into character")},Object(De.d)(A.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:function(e,n){e.trim()&&c(e,n)},courseId:a,hideMessage:n,chatSessionId:r,forceHideMessageLoader:!0}))):null},_a={container:Object(De.c)(Ct||(Ct=Le()(["\n    margin: 0 var(--cds-spacing-200);\n  "]))),divider:Object(De.c)(St||(St=Le()(["\n    margin: var(--cds-spacing-600) 0;\n  "])))},chat_view_RolePlayEndState=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.rolePlayAiPersonaTitle,t=e.rolePlayDebriefSessionId,a=Object(g.c)((function(e){return e.sessionState})),i=a.chatState,r=a.chatSessionId;return i===v.f.Ended||t&&t===r?Object(De.d)("div",{css:_a.container},Object(De.d)(un.a,{color:"light",orientation:"horizontal",css:_a.divider}),Object(De.d)(qe.a,{component:"p",color:"supportText"},Qe()("#{aiPersonaRole} has left. The Role Play activity has ended.",{aiPersonaRole:n})),Object(De.d)(un.a,{color:"light",orientation:"horizontal",css:_a.divider})):null},Na={endStateContainer:Object(De.c)(yt||(yt=Le()(["\n    margin: 0 auto;\n    width: 100%;\n  "]))),divider:Object(De.c)(Ot||(Ot=Le()(["\n    margin: var(--cds-spacing-600) var(--cds-spacing-200);\n  "]))),messageContainerResponses:Object(De.c)(It||(It=Le()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),be.b+"px")},chat_view_RolePlaySimulationSession=function(e){var n=e.coachPersona,t=e.hideMessage,i=e.isRolePlayTaskResponseLoading,r=useCoachItemChatContext_useCoachItemChatContext(),o=r.courseId,s=r.trackingData,c=r.rolePlaySimulationSessionId,d=r.rolePlaySimulationCreationError,l=r.startNewChat,u=r.sendMessage,m=Object(Ue.e)();return d?Object(De.d)(a.Fragment,null,Object(De.d)("div",{css:Na.messageContainerResponses},Object(De.d)(un.a,{css:Na.divider,color:"light",orientation:"horizontal"}),Object(De.d)(chat_view_RolePlayChatSession,{title:Qe()("Role Play simulation")},Object(De.d)(wa.a,{severity:"error",actions:Object(De.d)(Ve.a,{size:"small",onClick:function(){m("interact_coach",S()({coachInteractionType:"click_action",coachAction:"COACH_ITEM_SIMULATION_ERROR_START_NEW_CHAT"},s)),l()}},Qe()("Start a new session"))},Qe()("Something went wrong. Start a new session to try again"))))):c?Object(De.d)("div",{css:Na.messageContainerResponses,"data-testid":"role-play-simulation-session"},Object(De.d)(un.a,{css:Na.divider,color:"light",orientation:"horizontal"}),Object(De.d)(chat_view_RolePlayChatSession,{title:Qe()("Role Play simulation")},Object(De.d)(A.g,{profileClientAvatar:void 0,coachPersona:n,homeView:void 0,sendMessage:function(e,n){e.trim()&&u(e,n)},courseId:o,hideMessage:t,chatSessionId:c,forceShowMessageLoader:i}),Object(De.d)("div",{css:Na.endStateContainer},wt||(wt=Object(De.d)(chat_view_RolePlayEndState,null))))):null},Aa={messageContainer:Object(De.c)(jt||(jt=Le()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    height: 100%;\n    position: relative;\n\n    ","\n  "])),qn),messageContainerResponses:Object(De.c)(xt||(xt=Le()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),be.b+"px")},chat_view_RolePlayChatSessions=function(e){var n=e.coachPersona,t=e.isTaskResponseLoading,a=useCoachItemChatContext_useCoachItemChatContext(),i=a.isRolePlayLoading,r=a.rolePlayChatLoadingError,hideMessage=function(e){var n,a=e.message,i=e.index,r=e.messages,o=null==a?void 0:a.text;return!!(0===i||a.action===v.d.CoachItemSummary||o===be.l||a.action===v.d.CoachItemGenerateScenario||o===be.k||a.action===v.d.CoachItemGenerateJson||o===be.j||r[i-1].action===v.d.CoachItemGenerateJson||(null===(n=r[i-1])||void 0===n?void 0:n.text)===be.j||o&&function(e){return Object.values(Ia).map((function(e){return EndRolePlayDialog_getEndRolePlayMessage(e)})).includes(e)}(o)||null!=o&&o.includes(be.u)||o===be.r||i===r.length-1&&t)};return i?Object(De.d)("div",{css:Aa.messageContainer},Object(De.d)(LoadingView,{labelMessage:Qe()("Loading...")})):r?Object(De.d)("div",{css:Aa.messageContainer},Object(De.d)(chat_view_ErrorView,{error:r})):Object(De.d)("div",{css:Aa.messageContainer},Object(De.d)(chat_view_RolePlayIntroSession,{hideMessage:hideMessage}),Object(De.d)(chat_view_RolePlaySimulationSession,{coachPersona:n,hideMessage:hideMessage,isRolePlayTaskResponseLoading:t}),Object(De.d)(chat_view_RolePlayDebriefSession,{hideMessage:hideMessage}))},icons_AiPersonaAvatar=function(){return Et||(Et=a.createElement("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"ai-persona-avatar"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1566 9.46715C24.0384 9.17762 23.6284 9.17762 23.5102 9.46715L23.0061 10.7018C22.8879 10.9914 22.6581 11.2211 22.3686 11.3394L21.1339 11.8435C20.8444 11.9617 20.8444 12.3717 21.1339 12.4899L22.3686 12.994C22.6581 13.1122 22.8879 13.342 23.0061 13.6315L23.5102 14.8662C23.6284 15.1557 24.0384 15.1557 24.1566 14.8662L24.6607 13.6315C24.7789 13.342 25.0087 13.1122 25.2982 12.994L26.5329 12.4899C26.8225 12.3717 26.8225 11.9617 26.5329 11.8435L25.2982 11.3394C25.0087 11.2211 24.7789 10.9914 24.6607 10.7018L24.1566 9.46715ZM17.567 11.5567C17.3698 11.0737 16.6858 11.0737 16.4886 11.5567L15.42 14.1739C14.8284 15.6229 13.6785 16.7729 12.2295 17.3645L9.61227 18.433C9.12925 18.6302 9.12924 19.3142 9.61227 19.5114L12.2295 20.58C13.6785 21.1716 14.8284 22.3215 15.42 23.7705L16.4886 26.3877C16.6858 26.8707 17.3698 26.8707 17.567 26.3877L18.6355 23.7705C19.2271 22.3215 20.3771 21.1716 21.8261 20.58L24.4433 19.5114C24.9263 19.3142 24.9263 18.6302 24.4433 18.433L21.8261 17.3645C20.3771 16.7729 19.2271 15.6229 18.6355 14.1739L17.567 11.5567Z",fill:"url(#paint0_linear_1116_1338)"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"paint0_linear_1116_1338",x1:"7.92598",y1:"26.75",x2:"31.614",y2:"26.1636",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"var(--cds-color-blue-800)"}),a.createElement("stop",{offset:"1",stopColor:"var(--cds-color-blue-600)"})))))},Ta={conversationContainer:Object(De.c)(_t||(_t=Le()(["\n    height: 100%;\n  "]))),conversation:Object(De.c)(Nt||(Nt=Le()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: unset;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Be.a.down("xs")),headerContainer:Object(De.c)(At||(At=Le()(["\n    flex-grow: 0;\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),coachAvatarContainer:Object(De.c)(Tt||(Tt=Le()(["\n    width: 36px;\n    height: 36px;\n    background: var(--cds-color-interactive-stroke-primary-focus-invert);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    border-radius: 50%;\n  "]))),endStateContainer:Object(De.c)(Rt||(Rt=Le()(["\n    margin: 0 auto;\n    width: 100%;\n  "]))),footerContainer:Object(De.c)(Mt||(Mt=Le()(["\n    flex-grow: 0;\n    width: 100%;\n    margin: 0 auto;\n    max-width: ",";\n  "])),be.b+"px"),divider:Object(De.c)(Pt||(Pt=Le()(["\n    margin: var(--cds-spacing-600) 0;\n  "])))},chat_view_RolePlayChatConversation=function(e){var n=e.onStartButtonClick,t=e.onTryAgainClick,a=e.isTaskResponseLoading,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.rolePlayAiPersonaTitle,o=i.rolePlaySimulationSessionId,s=i.authorCoachItemSyncNotification,c=r&&!!o?{name:r,avatar:Object(De.d)(He.a,{css:Ta.coachAvatarContainer},Ft||(Ft=Object(De.d)(icons_AiPersonaAvatar,null)))}:void 0;return Object(De.d)("div",{css:Ta.conversation},s&&Object(De.d)(components_NotificationOverlay,null,s),Object(De.d)(chat_view_RolePlayChatSessions,{coachPersona:c,isTaskResponseLoading:a}),Lt||(Lt=Object(De.d)(un.a,{color:"light",orientation:"horizontal"})),Object(De.d)(chat_view_RolePlayChatActions,{coachPersona:c,onStartButtonClick:n,onTryAgainClick:t}),Object(De.d)("div",{css:Ta.footerContainer},Object(De.d)(components_Footer,{coachPersona:c&&S()(S()({},c),{},{name:"This Role Play activity"})})))},Ra={coachItemContainer:Object(De.c)(Dt||(Dt=Le()(["\n    margin: 0;\n    width: 100%;\n    height: 100%;\n    overflow-y: hidden;\n\n    "," {\n      margin-top: 1px;\n    }\n\n    .coach-new-message {\n      width: 100%;\n    }\n\n    .coach-input {\n      height: 60px;\n    }\n  "])),Be.a.down("xs"))},chat_view_ChatView=function(e){var n=e.onStartButtonClick,t=e.onTryAgainClick,i=e.isTaskResponseLoading,r=e.styles,o=useCoachItemChatContext_useCoachItemChatContext(),s=o.courseId,c=o.itemId,d=o.authoringMode,l=o.coachItemType,u=Object(Se.a)(d),m=Object(Ue.e)();a.useEffect((function(){m("interact_coach",S()(S()({coachInteractionType:"launch_coach_tool",coach:{mode:u}},s&&{product:{type:"course",id:s}}),c&&{courseItem:{id:c}}))}),[s,c,u,m]);var p=l===Oe.f.SocraticDialogue?"dialogue":"role_play";return Object(De.d)("div",{"data-testid":"coursera-coach-item",id:"coursera-coach-item",css:[Ra.coachItemContainer,r]},Object(De.d)(cn.a,{value:{data:{mode:u,courseId:s,itemId:c,itemType:p}}},Object(De.d)(dn.a,{value:{data:{mode:u,courseId:s,itemId:c,itemType:p}}},l===Oe.f.SocraticDialogue&&(Bt||(Bt=Object(De.d)(chat_view_ChatConversation,null))),l===Oe.f.RolePlay&&Object(De.d)(chat_view_RolePlayChatConversation,{onStartButtonClick:n,onTryAgainClick:t,isTaskResponseLoading:i}))))},chat_view_HowAmIDoingButton=function(e){var n=e.onClick,t=e.style,a=e.disabled,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.sendMessage,o=i.courseId,s=i.itemId,c=Object(Ue.e)();return Object(De.d)(sn.b,{onClick:function(){c("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_HOW_AM_I_DOING",coach:{mode:v.g.CoachItem},product:{type:"course",id:o},courseItem:{id:s}}),r(be.o,v.d.TypedMessage),null==n||n()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":Qe()("How am I doing?"),disabled:a,css:t},Qe()("How am I doing?"))},chat_view_ImStuckButton=function(e){var n=e.onClick,t=e.style,a=e.disabled,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.sendMessage,o=i.courseId,s=i.itemId,c=Object(Ue.e)();return Object(De.d)(sn.b,{onClick:function(){c("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_I_AM_STUCK",coach:{mode:v.g.CoachItem},product:{type:"course",id:o},courseItem:{id:s}}),r(be.c,v.d.TypedMessage),null==n||n()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":Qe()("I'm stuck"),disabled:a,css:t},Qe()("I'm stuck"))},Ma=Ue.b.HeadingGroup,Pa=Ue.b.Content,Fa=Ue.b.Actions,La={dialogActions:Object(De.c)(Ht||(Ht=Le()(["\n    "," {\n      flex-direction: column;\n\n      button {\n        max-width: 100%;\n        width: 100%;\n      }\n    }\n  "])),Be.a.down("sm"))},chat_view_NewChatButton=function(e){var n=e.onClick,t=e.onConfirm,i=e.style,r=e.disabled,o=e.buttonText,s=a.useState(!1),c=f()(s,2),d=c[0],u=c[1],p=Object(Ue.e)(),g=useCoachItemChatContext_useCoachItemChatContext(),h=g.startNewChat,b=g.courseId,k=g.itemId,C=g.coachItemType,closeDialog=function(){u(!1),null==n||n()},S=function(){var e=m()(l()().mark((function _callee(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_START_CHAT_NEW_CHAT_DIALOG",coach:{mode:v.g.CoachItem},product:{type:"course",id:b},courseItem:{id:k,type:Object(Se.h)(C)}}),h(),closeDialog(),null==t||t();case 4:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(De.d)(a.Fragment,null,Object(De.d)(sn.b,{onClick:function(){p("click_button",{button:{name:"coach_item_new_chat"},courseItem:{id:k,type:Object(Se.h)(C)}}),u(!0)},size:"medium",variant:"ghost",iconPosition:"before","aria-label":o||(C===Oe.f.RolePlay?Qe()("New session"):Qe()("Try again")),disabled:r,css:i},o||(C===Oe.f.RolePlay?Qe()("New session"):Qe()("Try again"))),Object(De.d)(Ue.b,{"aria-describedby":"coach-item-new-chat-dialog-content",sticky:"actions",trackingData:{modal:{name:"coach_item_new_chat_dialog"}},open:d,variant:"transactional",onClose:closeDialog},Object(De.d)(Ma,null,Qe()("Are you sure?")),Object(De.d)(Pa,{id:"coach-item-new-chat-dialog-content"},Object(De.d)(qe.a,{component:"p"},C===Oe.f.RolePlay?Qe()("If you start a new session, this one will disappear."):Qe()("If you start a new chat, this one will disappear."))),Object(De.d)(Fa,null,Object(De.d)(He.a,{container:!0,spacing:16,css:La.dialogActions},Object(De.d)(He.a,{item:!0},Object(De.d)(Ve.a,{variant:"primary",size:"medium",onClick:S},C===Oe.f.RolePlay?Qe()("Yes, start a new session"):Qe()("Yes, start a new chat"))),Object(De.d)(He.a,{item:!0},Object(De.d)(Ve.a,{variant:"secondary",size:"medium",onClick:closeDialog},Qe()("Cancel")))))))},Da=n("9rZX"),Ba=n.n(Da),Ha=n("wr+D"),Va=n("+Fz1"),Ua=n("5ydG"),qa={headerRight:Object(De.c)(Vt||(Vt=Le()(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  "]))),headerLeft:Object(De.c)(Ut||(Ut=Le()(["\n    overflow: hidden;\n  "]))),tunnelVisionContentContainer:Object(De.c)(qt||(qt=Le()(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n  "]))),closeElementContainer:Object(De.c)(zt||(zt=Le()(["\n    display: flex;\n    align-items: center;\n  "]))),tunnelVision:Object(De.c)(Gt||(Gt=Le()(["\n    .rc-TunnelVision div[data-classname='tunnelvision-window-0'] {\n      "," {\n        margin-left: 0;\n      }\n    }\n\n    .rc-TunnelVisionHeader {\n      > div {\n        overflow-x: hidden;\n      }\n    }\n\n    .rc-TunnelVisionClose {\n      background-color: var(--cds-color-neutral-background-primary);\n      margin-right: var(--cds-spacing-100);\n\n      &:focus,\n      &:hover {\n        background-color: var(--cds-color-interactive-stroke-primary-focus-invert);\n      }\n\n      "," {\n        margin-right: var(--cds-spacing-200);\n      }\n    }\n  "])),Be.a.down("sm"),Be.a.up("md"))},TunnelVisionWrapper_TunnelVisionWrapper=function(e){var n=e.onClose,t=e.headerLeft,i=e.headerRight,r=e.topBanner,o=e.children,s=e.ariaLabel,c=e.backbuttonAriaLabel,d=e.shouldConfirmClose,l=a.useState(!1),u=f()(l,2),m=u[0],p=u[1],g=a.useState(!1),v=f()(g,2),h=v[0],b=v[1],k=a.useState(null),C=f()(k,2),S=C[0],y=C[1],O=a.useRef(null),scrollPage=function(e){O.current&&O.current.scrollTo(0,e)},I=a.useCallback((function(e){if(O.current){var n=O.current.scrollTop||0;switch(e.keyCode){case 38:if(n<=0)return;scrollPage(n-50);break;case 33:if(n<=0)return;scrollPage(n-O.current.clientHeight);break;case 36:scrollPage(0);break;case 40:if(n>=O.current.scrollHeight)return;scrollPage(n+50);break;case 34:if(n>=O.current.scrollHeight)return;scrollPage(n+O.current.clientHeight);break;case 35:scrollPage(O.current.scrollHeight)}}}),[]);a.useEffect((function(){return Ba.a.setAppElement("#rendered-content"),p(!0),document.addEventListener("keydown",I),function(){document.removeEventListener("keydown",I)}}),[I]);return Object(De.d)(Ba.a,{style:{overlay:{position:"relative",zIndex:4e3}},isOpen:m,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,css:qa.tunnelVision,contentLabel:s},Object(De.d)(Va.a,{onClose:n,disableKeyPress:!0,shouldAllowClose:function(e){return!d||(b(!0),y(e||null),!1)},closeElement:Wt||(Wt=Object(De.d)(Ha.a,null)),headerElement:Object(De.d)(He.a,{container:!0,justifyContent:"space-between",alignItems:"center","data-testid":"tunnel-vision-header"},Object(De.d)(He.a,{item:!0,xs:9,sm:8,md:6,css:qa.headerLeft},t),Object(De.d)(He.a,{item:!0,xs:3,sm:4,md:6,justifyContent:"flex-end",css:qa.headerRight},i)),ariaLabel:s,backbuttonAriaLabel:c},Object(De.d)(He.a,{ref:O,css:qa.tunnelVisionContentContainer,id:"TUNNELVISIONWRAPPER_CONTENT_ID","data-testid":"tunnel-vision-content"},r&&Object(De.d)(He.a,{role:"alert","aria-live":"assertive"},r),o),h&&Object(De.d)(Ua.a,{onPrimaryButtonClick:function(){b(!1),y(null),S&&S()},onCancelButtonClick:function(){b(!1),y(null)}})))},za={itemName:Object(De.c)(Yt||(Yt=Le()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),itemNameSupportText:Object(De.c)(Kt||(Kt=Le()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),headerRight:Object(De.c)(Qt||(Qt=Le()(["\n    margin-right: var(--cds-spacing-150);\n    width: 100%;\n  "]))),menuButton:Object(De.c)(Jt||(Jt=Le()(["\n    margin-right: var(--cds-spacing-150);\n  "]))),menuItemButton:Object(De.c)($t||($t=Le()(["\n    max-width: unset;\n    width: 100%;\n    display: flex;\n    justify-content: flex-start;\n    margin-bottom: var(--cds-spacing-100);\n\n    img,\n    svg {\n      /* To override the CDS gap between icon and text */\n      margin-right: var(--cds-spacing-200) !important;\n    }\n  "])))},Ga=an.a.HeadingGroup,Wa=an.a.Content,chat_view_DialogueChatViewTunnelVision=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.coachItemType,t=e.isDialogueLoading,i=e.itemName,r=e.chatIsOpen,o=e.setChatIsOpen,s=Object(Ue.e)(),c=Object(g.c)((function(e){return e.sessionState.chatState})),d=hasDialogueChatStarted(Object(g.c)((function(e){return e.messages.messages}))),l=a.useState(!1),u=f()(l,2),m=u[0],p=u[1],toggleIsEndDialogueDialogOpen=function(){return p((function(e){return!e}))},v=Object(g.c)((function(e){return e.behavior.messageLoader})),h=!d||v,b=a.useState(!1),k=f()(b,2),C=k[0],S=k[1],y=Object(rn.a)(Be.a.down("sm")),closeActionsDialog=function(){S(!1)};return r?Object(De.d)(TunnelVisionWrapper_TunnelVisionWrapper,{onClose:function(){s("click_button",{button:{name:"coach_item_tv_back_button"}}),o(!1)},ariaLabel:Qe()("Dialogue"),backbuttonAriaLabel:Qe()("Close dialogue"),headerLeft:Object(De.d)("div",null,Object(De.d)(qe.a,{variant:"subtitleLarge",component:"h1",css:za.itemName},i),Object(De.d)(qe.a,{component:"p",variant:"bodySecondary",color:"supportText",css:za.itemNameSupportText},Qe()("Dialogue"))),headerRight:!t&&Object(De.d)(a.Fragment,null,y?Object(De.d)(on.a,{intent:"menu",variant:"ghost",onClick:function(){S(!0)},"aria-label":Qe()("Dialogue actions"),css:za.menuButton}):Object(De.d)(He.a,{container:!0,justifyContent:"flex-end",alignItems:"center",direction:"row",wrap:"nowrap",css:za.headerRight,spacing:12},n===Oe.f.SocraticDialogue&&Object(De.d)(a.Fragment,null,Object(De.d)(He.a,{item:!0},Object(De.d)(chat_view_HowAmIDoingButton,{disabled:h||"ACTIVE"!==c})),Object(De.d)(He.a,{item:!0},Object(De.d)(chat_view_ImStuckButton,{disabled:h||"ACTIVE"!==c}))),Object(De.d)(He.a,{item:!0},"ENDED"!==c?Object(De.d)(sn.b,{onClick:toggleIsEndDialogueDialogOpen,size:"medium",variant:"ghost",iconPosition:"before","aria-label":Qe()("End Dialogue"),disabled:h},Qe()("End Dialogue")):Object(De.d)(chat_view_NewChatButton,{disabled:h})))),topBanner:void 0},Zt||(Zt=Object(De.d)(chat_view_ChatView,null)),Object(De.d)(an.a,{open:C,onClose:closeActionsDialog,"aria-describedby":"dialog-actions-content",anchor:"right"},Object(De.d)(Ga,null,Qe()("Dialogue actions")),Object(De.d)(Wa,{id:"dialog-actions-content"},Object(De.d)(He.a,{container:!0,direction:"column",alignItems:"flex-start"},n===Oe.f.SocraticDialogue&&Object(De.d)(a.Fragment,null,Object(De.d)(chat_view_HowAmIDoingButton,{onClick:closeActionsDialog,style:za.menuItemButton,disabled:h||"ACTIVE"!==c}),Object(De.d)(chat_view_ImStuckButton,{onClick:closeActionsDialog,style:za.menuItemButton,disabled:h||"ACTIVE"!==c})),"ENDED"!==c?Object(De.d)(sn.b,{onClick:function(){toggleIsEndDialogueDialogOpen(),closeActionsDialog()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":Qe()("End Dialogue"),css:za.menuItemButton,disabled:h},Qe()("End Dialogue")):Object(De.d)(chat_view_NewChatButton,{onClick:closeActionsDialog,style:za.menuItemButton,disabled:h})))),Object(De.d)(chat_view_EndDialogueDialog,{onClose:function(){return p(!1)},isOpen:m})):null},Ya=n("UWlR"),Ka=n("pVnL"),Qa=n.n(Ka),Ja=["title","subTitle","headerRightElement","backButtonRef"],$a={headerContainer:Object(De.c)(Xt||(Xt=Le()(["\n    position: sticky;\n    top: 0;\n    left: 0;\n    max-height: ","px;\n    height: ","px;\n    width: 100%;\n    padding: var(--cds-spacing-200);\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n    border-radius: var(--cds-spacing-150) var(--cds-spacing-150) 0 0;\n    background-color: var(--cds-color-neutral-background-primary);\n  "])),68,68),titleSection:Object(De.c)(ea||(ea=Le()(["\n    overflow: hidden;\n\n    "," {\n      width: 60%;\n    }\n  "])),Be.a.down("sm")),title:Object(De.c)(na||(na=Le()(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  "]))),closeButtonIcon:Object(De.c)(ta||(ta=Le()(["\n    margin-right: var(--cds-spacing-150);\n    color: var(--cds-color-neutral-primary);\n    border-radius: 50%;\n\n    "," {\n      margin-right: 0;\n    }\n  "])),Be.a.down("sm")),actionButton:Object(De.c)(aa||(aa=Le()(["\n    color: var(--cds-color-neutral-primary);\n  "]))),header:Object(De.c)(ia||(ia=Le()(["\n    "," {\n      flex-shrink: 1;\n      min-width: 0;\n    }\n  "])),Be.a.down("sm"))},Za=a.forwardRef((function(e,n){var t=e.closeButtonIcon,a=e.tooltip,i=e.closeButtonAriaLabel,r=e.onClose;return Object(De.d)(on.a,{ref:n,css:$a.closeButtonIcon,component:"button",icon:t||ra||(ra=Object(De.d)(Ha.a,null)),size:"medium",variant:"ghost",onClick:r,tooltip:a||Qe()("Back"),"aria-label":i||Qe()("Close Tunnel Vision")})}));Za.displayName="BackButton";var Xa,ei,ni,ti,ai,ii,ri,oi,si,ci,di,li,ui,mi,pi,fi,gi,vi,hi,bi,ki,Ci,Si,yi,Oi,Ii,wi,ji,xi,Ei,_i,Ni,Ai,Ti,Ri,Mi,Pi,Fi,Li,Di,Bi,Hi,Vi,Ui,qi,zi,Gi,Wi,Yi,Ki,Qi,Ji,$i,Zi,Xi,er,nr,tr,ar,ir,rr,or,sr,MainPanelHeader_MainPanelHeader=function(e){var n=e.title,t=e.subTitle,a=e.headerRightElement,i=e.backButtonRef,r=c()(e,Ja);return Object(De.d)(He.a,{container:!0,alignItems:"center",wrap:"nowrap",css:$a.headerContainer},Object(De.d)(He.a,{item:!0},Object(De.d)(Za,Qa()({},r,{ref:i}))),Object(De.d)(He.a,{container:!0,item:!0,justifyContent:"space-between",alignItems:"center","data-testid":"tunnel-vision-header",css:$a.header},Object(De.d)(He.a,{item:!0,css:$a.titleSection},Object(De.d)(qe.a,{component:"h1",variant:"subtitleLarge",css:$a.title},n),t&&Object(De.d)(qe.a,{component:"span",variant:"bodySecondary"},t)),a&&Object(De.d)(He.a,{item:!0},a)))},cr={reactModal:Object(De.c)(Xa||(Xa=Le()(["\n    outline: none;\n  "]))),modalOverlay:Object(De.c)(ei||(ei=Le()(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100dvh; /* dvh = device viewport height: required so that on iOS devices elements do not extend beneath browser's interface such as the bottom navigation bar */\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n\n    /* Prevent mobile scrolling and touch behaviors */\n    overflow: hidden;\n    touch-action: none;\n    -webkit-overflow-scrolling: touch;\n\n    /* Ensure proper stacking and positioning */\n    z-index: 9999;\n  "]))),modalContent:Object(De.c)(ni||(ni=Le()(["\n    width: 100%;\n    height: 100%;\n    padding: var(--cds-spacing-200);\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n\n    /* Allow internal scrolling while preventing document scroll */\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n\n    "," {\n      padding: var(--cds-spacing-200);\n\n      /* Ensure content stays within viewport on mobile */\n      max-height: 100%;\n    }\n  "])),Be.a.down("sm")),temporaryDrawer:Object(De.c)(ti||(ti=Le()(["\n    button {\n      color: var(--cds-color-neutral-primary);\n    }\n  "]))),closeButtonIcon:Object(De.c)(ai||(ai=Le()(["\n    margin-right: var(--cds-spacing-150);\n  "]))),globalStyles:function(e){return Object(De.c)(ii||(ii=Le()(["\n    @keyframes slideIn {\n      from {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n\n      to {\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n\n    @keyframes slideOut {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n\n      to {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n    }\n\n    .ReactModal__Overlay {\n      opacity: 0;\n      animation: "," ","ms ease-out forwards;\n    }\n\n    .ReactModal__Overlay--after-open {\n      opacity: 1;\n    }\n\n    .ReactModal__Overlay--before-close {\n      opacity: 0;\n    }\n  "])),e?"slideIn":"slideOut",400)}},components_TunnelVision=function(e){var n=e.ariaLabel,t=e.isOpen,i=void 0!==t&&t,r=e.children,o=e.initialFocusRef;a.useEffect((function(){Ba.a.setAppElement("#rendered-content")}),[]),a.useEffect((function(){if(i){var e=document.body.style.overflow,n=document.body.style.position;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",function(){document.body.style.overflow=e,document.body.style.position=n,document.body.style.width="",document.body.style.height=""}}}),[i]);var s=a.useCallback((function(){null!=o&&o.current&&o.current.focus()}),[o]);return Object(De.d)(a.Fragment,null,Object(De.d)(De.b,{styles:cr.globalStyles(i)}),Object(De.d)(Ba.a,{style:{overlay:{position:"relative",zIndex:4e3}},closeTimeoutMS:400,isOpen:i,onAfterOpen:s,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,shouldFocusAfterRender:!o,css:cr.reactModal},Object(De.d)("div",{css:cr.modalOverlay,"aria-label":n},Object(De.d)("div",{css:cr.modalContent},r))))},dr=n("ojHA"),lr=n("JYd8"),ur=Object(lr.a)("ComprehensionCheckIcon",{ltr:{large:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("path",{d:"M9.996 18c-.414 0-.767-.147-1.059-.44A1.45 1.45 0 018.5 16.5h3c0 .417-.147.77-.442 1.063A1.456 1.456 0 019.996 18zm-2.24-2.5a.738.738 0 01-.537-.214.714.714 0 01-.219-.532c0-.21.072-.39.215-.535A.719.719 0 017.75 14h4.495c.212 0 .391.072.537.214.146.143.219.32.219.532 0 .21-.072.39-.215.535a.719.719 0 01-.534.219H7.756zM6.687 13a5.355 5.355 0 01-1.99-2.135A6.127 6.127 0 014 8c0-1.667.583-3.083 1.75-4.25C6.917 2.583 8.333 2 10 2c1.667 0 3.083.583 4.25 1.75C15.417 4.917 16 6.333 16 8a6.127 6.127 0 01-.698 2.865A5.355 5.355 0 0113.312 13H6.689zm.48-1.5h5.666a4.49 4.49 0 001.23-1.563A4.442 4.442 0 0014.5 8c0-1.255-.436-2.318-1.308-3.19-.872-.874-1.934-1.31-3.187-1.31s-2.318.436-3.193 1.31C5.938 5.681 5.5 6.744 5.5 8c0 .68.146 1.326.438 1.938A4.489 4.489 0 007.167 11.5z",fill:"currentColor"}))}}},!1),mr={sidePanelItemContainer:function(e){return Object(De.c)(ri||(ri=Le()(["\n    display: ",";\n    height: 100%;\n  "])),e?"block":"none")},sidePanelTabBar:Object(De.c)(oi||(oi=Le()(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: var(--cds-spacing-150);\n    padding: var(--cds-spacing-150) 0;\n    height: 100%;\n\n    "," {\n      flex-direction: row;\n      justify-content: space-around;\n      height: auto;\n    }\n  "])),Be.a.down("sm"))},pr={splitPanelView:Object(De.c)(si||(si=Le()(["\n    display: flex;\n    flex-wrap: nowrap;\n    width: 100%;\n    align-items: stretch;\n    height: 100%;\n    max-height: 100%;\n\n    "," {\n      flex-direction: column;\n    }\n  "])),Be.a.down("sm")),mainPanelContent:function(e){return Object(De.c)(ci||(ci=Le()(["\n    position: relative;\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    flex-grow: 1;\n    display: block;\n\n    "," {\n      display: ",";\n      height: ",";\n    }\n  "])),Be.a.down("sm"),e?"none":"block",e?"0":"calc(100% - ".concat(72,"px)"))},sidePanelContent:function(e){return Object(De.c)(di||(di=Le()(["\n    height: 100%;\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    width: ","px;\n    min-width: ","px;\n    flex-shrink: 0;\n    display: ",";\n    margin-left: var(--cds-spacing-200);\n\n    "," {\n      width: 100%;\n      height: ",";\n      margin: 0;\n      flex-grow: 1;\n    }\n  "])),300,300,e?"block":"none",Be.a.down("sm"),e?"calc(100% - ".concat(72,"px)"):"0")},sidePanelTabBarContainer:Object(De.c)(li||(li=Le()(["\n    height: 100%;\n    width: ","px;\n    min-width: ","px;\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n    flex-shrink: 0;\n    margin-left: var(--cds-spacing-100);\n\n    button {\n      background-color: inherit;\n    }\n\n    "," {\n      height: ","px;\n      width: 100%;\n    }\n  "])),72,72,Be.a.down("sm"),72)},fr={splitPanelView:Object(De.c)(ui||(ui=Le()(["\n    display: flex;\n    flex-wrap: nowrap;\n    width: 100%;\n    align-items: stretch;\n    height: 100%;\n    max-height: 100%;\n\n    "," {\n      flex-direction: column;\n    }\n  "])),Be.a.down("sm")),mainPanelContent:function(e){return Object(De.c)(mi||(mi=Le()(["\n    position: relative;\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    flex-grow: 1;\n    display: ",";\n\n    "," {\n      display: ",";\n      height: ",";\n    }\n  "])),e?"none":"block",Be.a.down("sm"),e?"none":"block",e?"0":"calc(100% - ".concat(72,"px)"))},sidePanelContent:function(e){return Object(De.c)(pi||(pi=Le()(["\n    height: 100%;\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    flex-grow: 1;\n    width: auto;\n    min-width: unset;\n    display: ",";\n\n    "," {\n      width: 100%;\n      height: ",";\n      margin: 0;\n      flex-grow: 1;\n    }\n  "])),e?"block":"none",Be.a.down("sm"),e?"calc(100% - ".concat(72,"px)"):"0")},sidePanelTabBarContainer:Object(De.c)(fi||(fi=Le()(["\n    height: 100%;\n    width: ","px;\n    min-width: ","px;\n    background-color: var(--cds-color-neutral-background-primary);\n    flex-shrink: 0;\n    border-left: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n\n    button {\n      background-color: inherit;\n    }\n\n    "," {\n      height: ","px;\n      width: 100%;\n      border-left: none;\n      border-top: 1px solid var(--cds-color-neutral-stroke-primary);\n    }\n  "])),72,72,Be.a.down("sm"),72)},components_SplitPanelView=function(e){var n=e.mainContent,t=e.panels,a=e.selectedPanel,i=e.onPanelChange,r=e.isSidePanelExpanded,o=void 0!==r&&r,s=e.testId,c=e.isSinglePanelMode,handleSelectItem=function(e){i(e,a!==e||!o)},d=function(e){var n=e?fr:pr;return S()(S()({},n),mr)}(void 0!==c&&c);return Object(De.d)("div",{css:d.splitPanelView,"data-testid":s||"split-panel-view"},Object(De.d)("div",{css:d.mainPanelContent(o)},n),Object(De.d)("div",{css:d.sidePanelContent(o),"data-testid":"side-panel-content"},t.map((function(e){var n=a===e.name;return Object(De.d)("div",{key:e.name,role:"tabpanel",id:"tabpanel-".concat(e.name),"aria-labelledby":"tab-".concat(e.name),tabIndex:n?0:-1,css:d.sidePanelItemContainer(n),"aria-hidden":!n},e.component)}))),Object(De.d)("div",{css:d.sidePanelTabBarContainer},Object(De.d)("div",{css:d.sidePanelTabBar,role:"tablist"},t.map((function(e){var n=e.name,t=e.icon,i=e.displayName,r=o&&n===a,s=!e.enabled;return Object(De.d)(sn.l,{role:"tab",size:"medium",key:n,id:"tab-".concat(n),"aria-label":n,"aria-controls":"tabpanel-".concat(n),onClick:function(){return handleSelectItem(n)},onKeyDown:function(e){return function(e,n){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),handleSelectItem(n))}(e,n)},icon:t,disabled:s,"data-testid":"side-panel-tab-".concat(n),selected:r,"aria-selected":r,tabIndex:0},i)})))))},gr=n("fdGY"),vr={header:Object(De.c)(gi||(gi=Le()(["\n    ","\n    justify-content: space-between;\n    width: unset;\n  "])),$a.headerContainer),titleSection:Object(De.c)(vi||(vi=Le()(["\n    display: flex;\n    flex-direction: column;\n  "]))),closeButton:Object(De.c)(hi||(hi=Le()(["\n    border-radius: 50%;\n  "]))),closeButtonIcon:Object(De.c)(bi||(bi=Le()(["\n    color: var(--cds-color-neutral-primary);\n  "])))},components_SidePanelHeader=function(e){var n=e.title,t=e.subTitle,a=e.onClose;return Object(De.d)(He.a,{container:!0,alignItems:"center",wrap:"nowrap",css:vr.header},Object(De.d)(He.a,{css:vr.titleSection},Object(De.d)(qe.a,{component:"h4",variant:"actionPrimary"},n),t&&Object(De.d)(qe.a,{component:"span",variant:"bodySecondary"},t)),Object(De.d)(Ue.a,{trackingData:{button:{name:"coach_item_authoring_preview_panel_close"}},onClick:a,size:"small",variant:"ghost","aria-label":Qe()("Close #{title} panel",{title:n}),css:vr.closeButton},Object(De.d)(gr.a,{size:"medium",title:Qe()("Close"),css:vr.closeButtonIcon})))},hr={overviewContent:Object(De.c)(ki||(ki=Le()(["\n    padding: var(--cds-spacing-200) var(--cds-spacing-300);\n    height: calc(100% - ","px);\n    overflow-y: auto;\n  "])),68)},components_RolePlayOverviewPanel=function(e){var n=e.onClose,t=e.overviewInstructions;return Object(De.d)(a.Fragment,null,Object(De.d)(components_SidePanelHeader,{title:Qe()("Overview"),subTitle:Qe()("Reference these details in the Role Play."),onClose:n}),Object(De.d)(components_LearnerOverview,{overviewInstructions:t,style:hr.overviewContent}))},br=n("+H68"),kr=n("dYbo"),icons_LightBulbIcon=function(e){var n=e.color,t=void 0===n?"var(--cds-color-neutral-primary)":n,i=e.width,r=void 0===i?24:i,o=e.height,s=void 0===o?24:o;return(a.createElement("svg",{width:r,height:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"lightbulb-icon"},a.createElement("mask",{id:"mask0_3768_45643",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24"},Ci||(Ci=a.createElement("rect",{width:"24",height:"24",fill:"var(--cds-color-grey-100)"}))),a.createElement("g",{mask:"url(#mask0_3768_45643)"},a.createElement("path",{d:"M12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 19V17H16V19H8ZM8.25 16C7.1 15.3167 6.1875 14.4 5.5125 13.25C4.8375 12.1 4.5 10.85 4.5 9.5C4.5 7.41667 5.22917 5.64583 6.6875 4.1875C8.14583 2.72917 9.91667 2 12 2C14.0833 2 15.8542 2.72917 17.3125 4.1875C18.7708 5.64583 19.5 7.41667 19.5 9.5C19.5 10.85 19.1625 12.1 18.4875 13.25C17.8125 14.4 16.9 15.3167 15.75 16H8.25ZM8.85 14H15.15C15.9 13.4667 16.4792 12.8083 16.8875 12.025C17.2958 11.2417 17.5 10.4 17.5 9.5C17.5 7.96667 16.9667 6.66667 15.9 5.6C14.8333 4.53333 13.5333 4 12 4C10.4667 4 9.16667 4.53333 8.1 5.6C7.03333 6.66667 6.5 7.96667 6.5 9.5C6.5 10.4 6.70417 11.2417 7.1125 12.025C7.52083 12.8083 8.1 13.4667 8.85 14Z",fill:t}))))},Cr={hintContainer:Object(De.c)(Si||(Si=Le()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-border-radius-200);\n    border: 1px solid var(--cds-color-grey-50);\n    padding: var(--cds-spacing-150) var(--cds-spacing-200);\n    transition: all 0.2s ease-in-out;\n\n    "," {\n      width: 100%;\n    }\n  "])),Be.a.down("sm")),hintHeader:Object(De.c)(yi||(yi=Le()(["\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    justify-content: space-between;\n    gap: var(--cds-spacing-100);\n  "]))),titleWrapper:Object(De.c)(Oi||(Oi=Le()(["\n    display: flex;\n    align-items: center;\n    gap: var(--cds-spacing-150);\n  "]))),title:function(e){return Object(De.c)(Ii||(Ii=Le()(["\n    color: ",";\n  "])),e?"var(--cds-color-neutral-primary)":"var(--cds-color-neutral-primary-weak)")},content:Object(De.c)(wi||(wi=Le()(["\n    margin-top: var(--cds-spacing-150);\n  "]))),actionBar:Object(De.c)(ji||(ji=Le()(["\n    display: flex;\n    justify-content: end;\n    align-items: center;\n  "])))},hints_HintMessage=function(e){var n,t=e.title,i=e.hintMessage,r=e.hintMessageId,o=e.defaultUserFeedback,s=useRolePlayHintsContext_useRolePlayHintsContext(),c=s.expandedHintMessages,d=s.setExpandedHintMessages,l=null!==(n=null==c?void 0:c[r])&&void 0!==n&&n,toggleExpanded=function(){d(S()(S()({},c),{},k()({},r,!l)))},u=a.useState(null!=o?o:N.a.unset),m=f()(u,2),p=m[0],g=m[1];return Object(De.d)(He.a,{css:Cr.hintContainer},Object(De.d)(He.a,{role:"button",css:Cr.hintHeader,"aria-expanded":l,onClick:toggleExpanded,tabIndex:0,"aria-controls":"hint-content-".concat(t),onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),toggleExpanded())}},Object(De.d)(He.a,{css:Cr.titleWrapper},Object(De.d)(icons_LightBulbIcon,{color:l?"var(--cds-color-neutral-primary)":"var(--cds-color-grey-700)",height:16,width:16}),Object(De.d)(qe.a,{component:"span",variant:"actionSecondary",css:Cr.title(l)},t)),l?xi||(xi=Object(De.d)(br.a,null)):Ei||(Ei=Object(De.d)(kr.a,null))),l&&Object(De.d)(a.Fragment,null,Object(De.d)(He.a,{css:Cr.content},Object(De.d)(qe.a,{id:"hint-content-".concat(t),component:"div",variant:"bodyPrimary",color:"emphasis.neutral"},i)),Object(De.d)(He.a,{css:Cr.actionBar},Object(De.d)(A.d,{message:{text:i,customId:r,sender:N.d.RESPONSE,userFeedback:p},onFeedbackSelect:g}))))},Sr={panel:Object(De.c)(_i||(_i=Le()(["\n    background: var(--cds-color-neutral-background-primary);\n    border-radius: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: calc(100% - ","px);\n  "])),68),hintsList:Object(De.c)(Ni||(Ni=Le()(["\n    display: flex;\n    flex-direction: column;\n    gap: var(--cds-spacing-150);\n    overflow-y: auto;\n    overflow-x: hidden;\n    margin: 0 var(--cds-spacing-50);\n    padding: var(--cds-spacing-200);\n    margin-bottom: auto;\n  "]))),askForHintButton:Object(De.c)(Ai||(Ai=Le()(["\n    margin-right: auto;\n    margin-left: var(--cds-spacing-200);\n    margin-bottom: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "]))),emptyState:Object(De.c)(Ti||(Ti=Le()(["\n    padding-top: var(--cds-spacing-200);\n    padding-left: var(--cds-spacing-200);\n    padding-right: var(--cds-spacing-200);\n  "]))),loadingCard:Object(De.c)(Ri||(Ri=Le()(["\n    padding: var(--cds-spacing-300) var(--cds-spacing-200);\n  "])))},HintsPanel_AskHintButton=function(e){var n=e.onClick,t=e.disabled,a=e.loading;return Object(De.d)(sn.b,{size:"small",variant:"secondary",onClick:n,css:Sr.askForHintButton,disabled:t,loading:a},Qe()("Ask for a hint"))},HintsPanel_HintsPanelContent=function(e){var n=e.canAskForHint,t=useRolePlayHintsContext_useRolePlayHintsContext(),i=t.requestNewHint,r=t.hints,o=t.isLoadingNewHint,s=t.isLoadingExistingHints,c=t.error,d=t.courseId,u=t.itemId,p=t.expandedHintMessages,f=t.setExpandedHintMessages,g=a.useRef(void 0),h=a.useRef(null),b=a.useRef(null),C=Object(Ue.e)(),y="NO_MESSAGES"===(null==c?void 0:c.type),O=o||s,I=r&&r.length>0,w=(null==r?void 0:r.length)||0,j=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;Object(a.useEffect)((function(){var e=SidePanelPersistenceUtils_getSidePanelState(j);j&&null!=e&&e.expandedHintMessages&&f(null==e?void 0:e.expandedHintMessages)}),[j,f]),a.useEffect((function(){var e,n;h.current&&(null===(e=(n=h.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[w]),a.useEffect((function(){var e,n;b.current&&(null===(e=(n=b.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[o]);var x=function(){var e=m()(l()().mark((function _callee(){var e;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return C("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_GENERATE_HINT",coach:{mode:v.g.CoachItem},product:{type:"course",id:d},courseItem:{id:u}}),n.next=3,i();case 3:(e=n.sent)&&e.length>0&&(g.current=e[e.length-1].messageId,f(S()(S()({},p),{},k()({},g.current,!0))));case 5:case"end":return n.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return!r&&y?Object(De.d)("div",null,Object(De.d)(qe.a,{variant:"bodyPrimary",color:"emphasis.neutral",component:"div",css:Sr.emptyState},Qe()('Something went wrong, please try again by clicking Ask for a hint"')),Object(De.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:O})):I?Object(De.d)("div",{css:Sr.panel},Object(De.d)("div",{css:Sr.hintsList},r.map((function(e,n){var t=e.messageId===g.current;return Object(De.d)("div",{key:e.messageId,ref:t?h:null},Object(De.d)(hints_HintMessage,{title:Qe()("Hint #{index}",{index:n+1}),hintMessage:e.message,hintMessageId:e.messageId,defaultUserFeedback:e.userFeedback}))})),o&&Object(De.d)("div",{css:[Cr.hintContainer,Sr.loadingCard],ref:b},Mi||(Mi=Object(De.d)(Wn.a,{variant:"text"})),Pi||(Pi=Object(De.d)(Wn.a,{variant:"text"})),Fi||(Fi=Object(De.d)(Wn.a,{variant:"text"})))),Object(De.d)("div",{"data-testid":"hints-footer"},Li||(Li=Object(De.d)(un.a,null)),Object(De.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:O}))):Object(De.d)("div",{css:Sr.panel},Object(De.d)("div",{"data-testid":"hints-empty-state"},Object(De.d)(qe.a,{variant:"bodyPrimary",color:"emphasis.neutral",component:"div",css:Sr.emptyState},Qe()("No hints here yet! When things get tricky, hints can point you in the right direction.")),Object(De.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:O})))},hints_HintsPanel=function(e){var n=e.canAskForHint,t=e.onClose,i=useRolePlayHintsContext_useRolePlayHintsContext(),r=i.loadHints,o=i.hints,s=i.resetHintsChatSession,c=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;return a.useEffect((function(){c&&r(),o&&!c&&s()}),[c]),Object(De.d)(a.Fragment,null,Object(De.d)(components_SidePanelHeader,{title:Qe()("Hints"),subTitle:Qe()("#{itemsCount} received",{itemsCount:(null==o?void 0:o.length)||0}),onClose:t}),Object(De.d)(HintsPanel_HintsPanelContent,{canAskForHint:n}))},icons_TaskIcon=function(e){var n=e.color,t=void 0===n?"var(--cds-color-grey-950)":n,i=e.width,r=void 0===i?24:i,o=e.height,s=void 0===o?24:o;return(a.createElement("svg",{width:r,fill:t,height:s,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.createElement("mask",{id:"mask0_6366_5843",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16"},Di||(Di=a.createElement("rect",{width:"16",height:"16",fill:"var(--cds-color-grey-100)"}))),Bi||(Bi=a.createElement("g",{mask:"url(#mask0_6366_5843)"},a.createElement("path",{d:"M10.3333 13.2837L7.5 10.4503L8.43333 9.51699L10.3333 11.417L14.1 7.65033L15.0333 8.58366L10.3333 13.2837ZM14 6.66699H12.6667V3.33366H11.3333V5.33366H4.66667V3.33366H3.33333V12.667H7.33333V14.0003H3.33333C2.96667 14.0003 2.65278 13.8698 2.39167 13.6087C2.13056 13.3475 2 13.0337 2 12.667V3.33366C2 2.96699 2.13056 2.6531 2.39167 2.39199C2.65278 2.13088 2.96667 2.00033 3.33333 2.00033H6.11667C6.23889 1.61144 6.47778 1.29199 6.83333 1.04199C7.18889 0.791992 7.57778 0.666992 8 0.666992C8.44444 0.666992 8.84167 0.791992 9.19167 1.04199C9.54167 1.29199 9.77778 1.61144 9.9 2.00033H12.6667C13.0333 2.00033 13.3472 2.13088 13.6083 2.39199C13.8694 2.6531 14 2.96699 14 3.33366V6.66699ZM8 3.33366C8.18889 3.33366 8.34722 3.26977 8.475 3.14199C8.60278 3.01421 8.66667 2.85588 8.66667 2.66699C8.66667 2.4781 8.60278 2.31977 8.475 2.19199C8.34722 2.06421 8.18889 2.00033 8 2.00033C7.81111 2.00033 7.65278 2.06421 7.525 2.19199C7.39722 2.31977 7.33333 2.4781 7.33333 2.66699C7.33333 2.85588 7.39722 3.01421 7.525 3.14199C7.65278 3.26977 7.81111 3.33366 8 3.33366Z"})))))},yr={completedTask:Object(De.c)(Hi||(Hi=Le()(["\n    display: flex;\n    gap: var(--cds-spacing-100);\n    color: var(--cds-color-green-700);\n    text-decoration: line-through;\n  "]))),taskItemContainer:Object(De.c)(Vi||(Vi=Le()(["\n    margin-left: 0;\n    gap: var(--cds-spacing-50);\n    width: 100%;\n\n    &:not(:last-of-type) {\n      margin-bottom: var(--cds-spacing-50);\n    }\n  "]))),bulletStyle:Object(De.c)(Ui||(Ui=Le()(["\n    padding: unset !important;\n    padding-top: var(--cds-spacing-50) !important;\n    font-size: 24px;\n    color: var(--cds-color-grey-100);\n  "]))),taskItem:Object(De.c)(qi||(qi=Le()(["\n    margin: 0;\n    flex: 1;\n    padding: var(--cds-spacing-50) 0 !important;\n  "]))),iconContainer:Object(De.c)(zi||(zi=Le()(["\n    width: var(--cds-spacing-300);\n  "])))},TaskItem_CompletedTaskItem=function(e){var n=e.task;return Object(De.d)("div",{css:yr.completedTask},Object(De.d)("div",{css:yr.iconContainer},Gi||(Gi=Object(De.d)(Ze.a,{size:"medium",color:"success"}))),Object(De.d)(qe.a,{"data-testid":"completed-task-".concat(n.title),component:"p",variant:"bodySecondary",color:"success"},n.title))},TaskItem_LoadingTaskItem=function(){return Object(De.d)(He.a,{container:!0,spacing:8,css:yr.taskItemContainer},Object(De.d)(He.a,{item:!0,css:yr.bulletStyle},Object(De.d)("div",{css:yr.iconContainer},"")),Object(De.d)(He.a,{item:!0,css:yr.taskItem},Wi||(Wi=Object(De.d)(Wn.a,{height:32,"data-testid":"loading-screen"}))))},TaskItem_TaskItem=function(e){var n=e.task;return Object(De.d)(He.a,{container:!0,spacing:12,css:yr.taskItemContainer},Object(De.d)(He.a,{item:!0,css:yr.bulletStyle},Object(De.d)("div",{css:yr.iconContainer},"")),Object(De.d)(He.a,{item:!0,css:yr.taskItem},Object(De.d)(qe.a,{key:n.id,"data-testid":"todo-task-".concat(n.title),component:"span",variant:"bodySecondary",color:"supportText"},n.title)))},Or={taskPanelContent:Object(De.c)(Yi||(Yi=Le()(["\n    display: flex;\n    flex-direction: column;\n    padding: var(--cds-spacing-200);\n    gap: var(--cds-spacing-100);\n  "]))),loadingTaskItemContainer:Object(De.c)(Ki||(Ki=Le()(["\n    padding: var(--cds-spacing-200);\n  "]))),feedbackLink:Object(De.c)(Qi||(Qi=Le()(["\n    cursor: pointer;\n    text-decoration: underline;\n    padding: 0;\n    font: inherit;\n    color: inherit;\n\n    &:focus,\n    &:hover {\n      color: var(--cds-color-interactive-secondary);\n    }\n\n    // Updating the disabled styles so it does not look like a link that learner can click on\n    &.cds-button-disabled {\n      cursor: default;\n      color: var(--cds-color-interactive-secondary);\n      text-decoration: none;\n    }\n  "]))),feedbackLinkContainer:Object(De.c)(Ji||(Ji=Le()(["\n    padding-top: var(--cds-spacing-200);\n    background-color: var(--cds-color-emphasis-primary-background-xweak);\n  "])))},tasks_TasksPanelContent=function(e){var n=e.todoTasks,t=e.completedTasks,i=e.isLoading,r=useCoachItemChatContext_useCoachItemChatContext(),o=r.sendMessage,s=r.trackingData,c=r.rolePlayDebriefSessionId,d=r.rolePlaySimulationSessionId,l=a.useState(!1),u=f()(l,2),m=u[0],p=u[1],g=Object(Ue.e)();if(i)return Object(De.d)("div",{css:Or.loadingTaskItemContainer,"data-testid":"task-loading"},$i||($i=Object(De.d)(TaskItem_LoadingTaskItem,null)),Zi||(Zi=Object(De.d)(TaskItem_LoadingTaskItem,null)),Xi||(Xi=Object(De.d)(TaskItem_LoadingTaskItem,null)),er||(er=Object(De.d)(TaskItem_LoadingTaskItem,null)));var h=n.length>0&&t.length>0,b=0===n.length&&t.length>0,k=!c&&b&&d;return Object(De.d)("div",{css:Or.taskPanelContent,"data-testid":"task-list"},n.map((function(e){return Object(De.d)(a.Fragment,{key:e.id},Object(De.d)(TaskItem_TaskItem,{task:e}))})),h&&(nr||(nr=Object(De.d)(un.a,null))),t.map((function(e){return Object(De.d)(a.Fragment,{key:e.id},Object(De.d)(TaskItem_CompletedTaskItem,{task:e}))})),k&&Object(De.d)(wa.a,{severity:"success","data-testid":"completion-notification",title:Qe()("Way to go!"),css:Or.feedbackLinkContainer},Object(De.d)(ln.FormattedMessage,{component:"p",message:Qe()("You can keep chatting with the AI Persona or you can jump to {feedbackLink}."),feedbackLink:Object(De.d)(Ve.a,{onClick:function(){g("interact_coach",S()({coachInteractionType:"click_action",coachAction:v.d.CoachItemGenerateFeedback},s)),o(be.l,v.d.CoachItemTaskCompleted),p(!0)},variant:"ghost",component:"span",size:"small",css:Or.feedbackLink,disabled:m},Qe()("your feedback"))})))},tasks_TasksPanel=function(e){var n=e.onClose,t=useRolePlayTasksContext_useRolePlayTasksContext(),i=t.tasks,r=t.isTaskListLoading,o=t.loadTaskList,s=t.shouldSkipChatHistory,c=t.taskChatSessionId,d=t.resetTaskChatSession,l=a.useRef(null),u=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId,m=(i||[]).filter((function(e){return e.completed})),p=(i||[]).filter((function(e){return!e.completed})),f=(i||[]).length;return a.useEffect((function(){if(c&&!u)return d(),void(l.current=null);u&&(s?l.current=u:r||l.current===u||(l.current=u,o(u)))}),[o,d,u,r,s,c]),Object(De.d)(a.Fragment,null,Object(De.d)(components_SidePanelHeader,{title:Qe()("Tasks"),subTitle:f>0?Qe()("#{completedTasksCount}/#{totalTasksCount} complete",{completedTasksCount:m.length,totalTasksCount:f}):void 0,onClose:n}),Object(De.d)(tasks_TasksPanelContent,{todoTasks:p,completedTasks:m,isLoading:r}))},RolePlayChatView_styles_chatViewContainer=function(e){return Object(De.c)(tr||(tr=Le()(["\n    padding: 0;\n    height: ",";\n    border-radius: 0 0 var(--cds-spacing-150) var(--cds-spacing-150);\n\n    > div {\n      border-radius: 0;\n    }\n\n    "," {\n      overflow: hidden;\n    }\n  "])),e?"calc(100% - ".concat(68,"px)"):"100%",Be.a.down("sm"))},chat_view_RolePlayChatView=function(e){var n,t,i=e.chatHeader,r=e.overviewInstructions,o=e.isSinglePanelMode,s=void 0!==o&&o,c=useRolePlayTasksContext_useRolePlayTasksContext().isTaskResponseLoading,d=useCoachItemChatContext_useCoachItemChatContext(),l=d.rolePlaySimulationSessionId,u=d.rolePlayDebriefSessionId,m=d.itemId,p=SidePanelPersistenceUtils_getSidePanelState(l)||{},f=p.selectedPanelStatus,g=p.selectedPanel,v=useSidePanelContext_useSidePanelContext(),h=v.setSelectedPanelStatus,b=v.setSelectedPanel,k=v.selectedPanelStatus,C=v.selectedPanel;a.useEffect((function(){s||(f&&f!==k&&h(f,l),g&&g!==C&&b(g,l))}),[l,f,g,k,C,s,h,b]);var S=C,y="expanded"===k,O=Object(Ue.e)(),I=a.useCallback((function(){h("collapsed",l)}),[h,l]),w=a.useMemo((function(){return[{name:"overview",displayName:Qe()("Overview"),icon:ar||(ar=Object(De.d)(dr.a,null)),component:n||(n=Object(De.d)(components_RolePlayOverviewPanel,{overviewInstructions:r,onClose:I})),enabled:!0},{name:"tasks",displayName:Qe()("Tasks"),icon:ir||(ir=Object(De.d)(icons_TaskIcon,null)),component:t||(t=Object(De.d)(tasks_TasksPanel,{onClose:I})),enabled:!!l},{name:"hints",displayName:Qe()("Hints"),icon:rr||(rr=Object(De.d)(ur,null)),component:Object(De.d)(hints_HintsPanel,{canAskForHint:!u,onClose:I}),enabled:!!l}]}),[r,I,l,u]);return Object(De.d)(components_SplitPanelView,{isSidePanelExpanded:y,mainContent:Object(De.d)(a.Fragment,null,i,Object(De.d)(chat_view_ChatView,{onStartButtonClick:function(e){s||(b("tasks",e),h("expanded",e))},onTryAgainClick:function(){s||(b("overview"),h("expanded"))},isTaskResponseLoading:c,styles:RolePlayChatView_styles_chatViewContainer(!!i)})),panels:w,selectedPanel:S,onPanelChange:function(e,n){var t=n?"expanded":"collapsed";O("toggle_side_panel",{sidePanel:{name:e,status:n?"open":"closed"},courseItem:{id:m,type:"role_play"}}),b(e,l),h(t,l)},testId:"role-play-chat-view",isSinglePanelMode:s})},Ir={rightElementButton:Object(De.c)(or||(or=Le()(["\n    "," {\n      padding: var(--cds-spacing-100);\n    }\n  "])),Be.a.down("sm"))},chat_view_RolePlayChatViewTunnelVision=function(e){var n=e.overviewInstructions,t=useCoachItemChatContext_useCoachItemChatContext(),i=t.itemName,r=t.setChatIsOpen,o=t.chatIsOpen,s=t.rolePlaySimulationSessionId,c=t.rolePlayDebriefSessionId,d=t.isRolePlayEndedByUser,l=useSidePanelContext_useSidePanelContext(),u=l.setSelectedPanelStatus,m=l.setSelectedPanel,p=Object(g.c)((function(e){return e.behavior})).messageLoader,v=useRolePlayHintsContext_useRolePlayHintsContext().resetHintsChatSession,h=useRolePlayTasksContext_useRolePlayTasksContext().resetTaskChatSession,b=Object(Ue.e)(),k=a.useState(!1),C=f()(k,2),S=C[0],y=C[1],O=a.useRef(null),I=a.useCallback((function(){b("click_button",{button:{name:"coach_item_tv_back_button"}}),r(!1)}),[r,b]),onNewChatButtonConfirm=function(){m("overview",s),u("expanded",s),v(),h(),SidePanelPersistenceUtils_clearSidePanelState(s)},handleToggleEndRolePlayDialog=function(){y(!S)};return Object(De.d)(components_TunnelVision,{isOpen:o,ariaLabel:i,initialFocusRef:O},Object(De.d)(chat_view_RolePlayChatView,{overviewInstructions:n,chatHeader:Object(De.d)(MainPanelHeader_MainPanelHeader,{title:i,subTitle:Qe()("Role Play"),onClose:I,closeButtonAriaLabel:Qe()("Close Role Play"),headerRightElement:c&&!d?Object(De.d)(chat_view_NewChatButton,{onConfirm:onNewChatButtonConfirm,buttonText:Qe()("Try again")}):!c&&s?Object(De.d)(Ya.a,{size:"small",variant:"ghost",onClick:handleToggleEndRolePlayDialog,disabled:p,css:Ir.rightElementButton},Qe()("End Role Play")):void 0,backButtonRef:O})}),Object(De.d)(chat_view_EndRolePlayDialog,{onClose:handleToggleEndRolePlayDialog,isOpen:S}))},wr=n("8VeA");e.a=function(e){var n,t,i=e.computedItem,s=e.markComplete,c=e.markStarted,d=e.configuration,l=e.refreshCompletedStatus,u=e.courseBranchId,m=i.id,p=i.name,f=i.courseId,g=i.isStarted,v=i.isCompleted,h=null==d?void 0:d.coverPageInstructions,b=null==d?void 0:d.versionedCoachItemType,k=parseInt(null==b?void 0:b.split("@")[1],10)||0,C=Object(Se.q)(b),S=(null===(n=d.advancedPromptParameters)||void 0===n?void 0:n[Oe.a.aiPersonaRole])||(null===(t=d.promptParameters)||void 0===t?void 0:t[Oe.g.aiPersonaRole]),y=Object(wr.b)().nextItem,O=null==y?void 0:y.getLink();return a.useEffect((function(){var e=Object(o.b)(),n=e.external_id,t=e.is_staff;r.b.init({visitor:{id:n,isCourserian:Object(o.d)(),isStaff:t}},r.a)}),[]),a.createElement(useCoachItemChatContext_CoachItemChatContextProvider,{courseId:f,courseBranchId:u,itemId:m,itemName:p,nextItemLink:O,coachItemType:C,rolePlayAiPersonaTitle:S,onCloseChat:l,markItemComplete:s},a.createElement(components_CoverPage,{instructions:h,isCompleted:v,isStarted:g,markStarted:c,markComplete:s,promptVersion:k}),C===Oe.f.SocraticDialogue&&(sr||(sr=a.createElement(chat_view_DialogueChatViewTunnelVision,null))),C===Oe.f.RolePlay&&a.createElement(useSidePanelContext_SidePanelProvider,null,a.createElement(useRolePlayTasksContext_RolePlayTasksContextProvider,{courseId:f,itemId:m,courseBranchId:u},a.createElement(useRolePlayHintsContext_RolePlayHintsContextProvider,{courseId:f,itemId:m,courseBranchId:u},a.createElement(chat_view_RolePlayChatViewTunnelVision,{overviewInstructions:h})))))}},IyUU:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AiCoach_CreateChatSession"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateChatSessionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach_CreateChatSession"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:146}};e.loc.source={body:"mutation AiCoach_CreateChatSession($input: AiCoach_CreateChatSessionInput!) {\n  AiCoach_CreateChatSession(input: $input) {\n    id\n    title\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoach_CreateChatSession=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoach_CreateChatSession")},J2jR:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachClipRecommendations"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ClipRecommendation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachMessageCourse"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"partners"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"abbreviatedName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"logo"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:276}};n.loc.source={body:'#import "./aiCoachMessageCourseFragment.graphql"\n\nfragment AiCoachClipRecommendations on AiCoach_ClipRecommendation {\n  course {\n    ...AiCoachMessageCourse\n  }\n  partners {\n    abbreviatedName\n    name\n    logo\n  }\n  itemTitle\n  itemSlug\n  itemId\n  previewImage\n  duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wuXY").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachClipRecommendations=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachClipRecommendations")},P1ex:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AiCoach_ChatSessionsByUserId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryChatSessionsByUserId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalElements"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:299}};e.loc.source={body:"query AiCoach_ChatSessionsByUserId($userId: ID!, $limit: Int) {\n  AiCoach {\n    queryChatSessionsByUserId(userId: $userId, limit: $limit) {\n      elements {\n        createdAt\n        id\n        title\n        userId\n        status\n      }\n      pagination {\n        totalElements\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoach_ChatSessionsByUserId=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoach_ChatSessionsByUserId")},RNb2:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachReadingItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ReadingItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"readingDuration"},name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:182}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n\nfragment AiCoachReadingItem on AiCoach_ReadingItemMetadata {\n  ...ItemMetadataFields\n  itemTitle\n  readingDuration: duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wBc2").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachReadingItem=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachReadingItem")},X9Xi:function(module,e,n){"use strict";n.r(e);var t=n("pVnL"),a=n.n(t),i=n("VbXa"),r=n.n(i),o=n("VkAN"),s=n.n(o),c=n("OhL7"),d=n("q1tI"),l=n("17x9"),u=n.n(l),m=n("MnCE"),p=n("/ukj"),f=n("sQ/U"),g=n("Gok7"),v=n("TOZ3"),h=n("EBS+"),b=n("5B3L"),k=n("YmkS"),C=n("pnKK"),S=n("8VeA"),y=n("q5zD"),O=n("w/oa"),I=n("15pW"),w=n("qyGb"),j=n("Ezgt"),x=n("S+eF"),E=n.n(x),N=n("v6sC"),A=Object(N.a)("/api/onDemandWidgetProgress.v1",{type:"rest"}),T={markComplete:function(e,n,t,a){var i={data:{sessionId:a,progressState:"Completed"}},r=[t,n,e].join("~");return E()(A.put(r,i))},markStarted:function(e,n,t,a){var i={data:{sessionId:a,progressState:"Started"}},r=[t,n,e].join("~");return E()(A.put(r,i))}},R=T,WidgetItemActions_refreshProgress=function(e,n,t,a,i){t.setState(n),e.executeAction(j.b,{courseProgress:a}),i&&e.executeAction(w.a,{courseSlug:i,refetch:!0})},WidgetItemActions_markItemComplete=function(e,n){var t=n.itemId,a=n.courseId,i=n.userId,r=n.itemProgress,o=n.courseProgress,s=n.sessionId,c=n.courseSlug;return R.markComplete(t,a,i,s).then(WidgetItemActions_refreshProgress(e,I.d.progressCompleted,r,o,c))},WidgetItemActions_markItemStarted=function(e,n){var t=n.itemId,a=n.courseId,i=n.userId,r=n.itemProgress,o=n.courseProgress,s=n.sessionId;return R.markStarted(t,a,i,s).then(WidgetItemActions_refreshProgress(e,I.d.progressStarted,r,o))},M=n("++Ya"),P=n("PStO"),F=function(e){function OnDemandWidgetSessionsV1(){return e.apply(this,arguments)||this}return r()(OnDemandWidgetSessionsV1,e),OnDemandWidgetSessionsV1}(n("HlCP").a);F.RESOURCE_NAME="onDemandWidgetSessions.v1";var L,D,B=F,hooks_useWidgetSession=function(e,n,t,a){var i=Object(f.b)().id,r=Object(M.c)([i.toString(),e,n]),o=Object(P.b)((function(){return t?{}:a?{widgetSessionWithoutProgressUpdate:B.finder("getWithoutProgressUpdate",{fields:["session","sessionId"],params:{id:r}})}:{widgetSession:B.get(r,{fields:["session","sessionId"]})}}),[r]).data,s=o.widgetSession,c=o.widgetSessionWithoutProgressUpdate;return null!=s?s:null==c?void 0:c[0]},isCompatibleWithMobile=function(e){var n=e.supportsTouch,t=e.minWidthPx,a=e.minHeightPx,i=function(){var e,n;if("undefined"!=typeof document&&"undefined"!=typeof window){var t=window.screen;if(void 0!==window.screen)e=t.height,n=t.width;else e=window.innerHeight,n=window.innerWidth}else e=0,n=0;return{deviceHeight:e,deviceWidth:n}}(),r=i.deviceWidth,o=i.deviceHeight;return!1!==n&&(!(void 0!==t&&t>r)&&!(void 0!==a&&a>o))},H=n("z3RS"),V=n("cVIm"),U=n("kvW3"),q=n("gKW9"),z=n.n(q),G=(n("46xw"),"".concat(V.a.url.resource_assets,"widget/svgcomputer.svg")),W=function(e){function UnavailableOnMobileMessage(){return e.apply(this,arguments)||this}return r()(UnavailableOnMobileMessage,e),UnavailableOnMobileMessage.prototype.render=function(){var e=this.props.name;return(d.createElement("div",{className:"rc-UnavailableOnMobileMessage vertical-box align-items-absolute-center"},d.createElement("div",{className:"headline-5-text p-x-1"},e),d.createElement("div",{className:"body-1-text p-x-1 p-b-2"},d.createElement(U.b,{message:z()("This item was not designed for use on a small screen.")})),d.createElement("div",{className:"align-horizontal-center p-b-2"},d.createElement("img",{className:"computer-icon",src:G,alt:z()("Computer Icon"),height:"120",width:"220"})),d.createElement("div",{className:"body-1-text horizontal-box align-horizontal-center p-x-1"},d.createElement(U.b,{message:z()("Please use a computer or laptop to complete this item.")}))))},UnavailableOnMobileMessage}(d.Component),Y=n("Jz+x"),K=n("TdzE"),Q=n("2Kkf"),J=n("emlC"),Z=n("35G5"),X=n("/AOU"),ee=n("w/Ge"),ne={widgetItem:Object(c.c)(L||(L=s()(["\n    margin: 20px auto;\n    max-width: 960px;\n\n    @media (max-width: 768px) {\n      margin: 0;\n      max-width: 100%;\n    }\n  "])))},te=[X.c.SET_COMPLETE,X.c.SET_GRADED_COMPLETE],ae=function(e){function WidgetItem(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).state={iFrameMessages:[],widgetId:Object(ee.b)(),itemProgressState:null,markCompleteDeferred:null,isExpanded:!1},n.onToggleExpanded=function(){return n.setState((function(e){return{isExpanded:!e.isExpanded}}))},n.markComplete=function(){var e=n.props,t=e.computedCourseProgress.courseProgress,a=e.computedItem,i=e.courseId,r=e.sessionId,o=e.courseSlug,s=t.getItemProgress(a.id),c=f.a.get().id,d=a.id;O.d(t.get("id"),t),n.context.executeAction(WidgetItemActions_markItemComplete,{itemId:d,courseId:i,userId:c,itemProgress:s,courseProgress:t,sessionId:r,courseSlug:o})},n.markStarted=function(){var e=n.props,t=e.computedCourseProgress.courseProgress,a=e.computedItem,i=e.courseId,r=e.sessionId,o=t.getItemProgress(a.id),s=f.a.get().id,c=a.id;n.context.executeAction(WidgetItemActions_markItemStarted,{itemId:c,courseId:i,userId:s,itemProgress:o,courseProgress:t,sessionId:r})},n.isOnMobile=function(){var e=n.context.getStore("ApplicationStore").getUserAgent(),t=e&&e.isMobileBrowser;return p.a.get()||t},n}r()(WidgetItem,e);var n=WidgetItem.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var n=this.props,t=n.computedItem,a=n.computedCourseProgress.courseProgress.getItemProgress(t.id);a.getState()!==this.state.itemProgressState&&(this.setState({itemProgressState:a.getState()}),this.state.markCompleteDeferred&&(this.state.markCompleteDeferred.resolve(),this.setState({markCompleteDeferred:null})))},n.render=function(){var e=this,n=this.props,t=n.session,a=n.sessionId,i=n.computedItem,r=n.courseBranchId,o=n.courseId,s=n.itemMetadata,d=n.nextItem,l=this.state.isExpanded;return t?this.isOnMobile()&&!isCompatibleWithMobile(i.contentSummary.definition)?Object(c.d)(W,{name:i.name}):Object(c.d)("div",{css:ne.widgetItem},Object(c.d)(g.a,{component:"h1",className:"rc-A11yScreenReaderOnly"},i.name),Object(c.d)(C.a,{courseId:i.courseId,show:!0}),Object(c.d)(H.a,{itemName:i.name,itemMetadata:s,courseId:i.courseId}),Object(h.p)(t.iframeTitle)?Object(c.d)(b.a,{computedItem:i,configuration:t.configuration.data,markComplete:this.markComplete,markStarted:this.markStarted,refreshCompletedStatus:this.props.refreshCourseProgress,courseBranchId:r}):Object(c.d)(Z.a,{inWidgetItem:!0,session:t,sessionId:a,courseBranchId:r,courseId:o,itemId:i.id,onToggleExpanded:this.onToggleExpanded,widgetId:this.state.widgetId,parentRpcActions:te,isComplete:i.isCompleted,widgetContentTitle:i.name,nextItem:d,isGradedPluginItem:"gradedWidget"===s.getTypeName(),markComplete:function(){e.markComplete()}}),Object(c.d)(v.b,{"aria-hidden":l,style:{marginTop:"50px",borderTop:"1px solid var(--cds-color-grey-25)",paddingTop:"15px",paddingBottom:"15px"}},Object(c.d)(k.a,{computedItem:i,itemFeedbackType:"widget"}))):D||(D=Object(c.d)("div",{className:"horizontal-box align-items-absolute-center widget-iframe"},Object(c.d)(y.a,{name:"spinner",size:"2x",spin:!0,className:"color-hint-text"})))},WidgetItem}(d.Component);ae.contextTypes={executeAction:u.a.func.isRequired,getStore:u.a.func.isRequired};var ie=Object(m.b)(Object(K.b)(),Object(Y.a)(),Object(J.a)(["CourseStore","SessionStore"],(function(e){var n=e.CourseStore,t=e.SessionStore;return{courseId:n.getCourseId(),courseSlug:n.getCourseSlug(),courseBranchId:t.getBranchId()}})),Q.a)((function(e){var n=e.computedItem,t=n.courseId,i=n.id,r=hooks_useWidgetSession(t,i),o=Object(S.b)().nextItem;return Object(c.d)(ae,a()({},e,{session:null==r?void 0:r.session,sessionId:null==r?void 0:r.sessionId,nextItem:o}))}));e.default=ie},ZGIP:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachLectureItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_LectureItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"lectureDuration"},name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:182}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n\nfragment AiCoachLectureItem on AiCoach_LectureItemMetadata {\n  ...ItemMetadataFields\n  itemTitle\n  lectureDuration: duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wBc2").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachLectureItem=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachLectureItem")},"b+Bk":function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreateUserMessageResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponseResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messageByAiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"senderType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messageId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"chatSessionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recommendedActions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionMessage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clipRecommendations"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachClipRecommendations"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigationButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationLeadingMessage"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponseInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreateUserMessageResult"},directives:[]}]}}]}}],loc:{start:0,end:929}};n.loc.source={body:'#import "./aiCoachGoToFirstItemNavigationButtonFragment.graphql"\n#import "./aiCoachClipRecommendationsFragment.graphql"\n\nfragment CreateUserMessageResult on AiCoach_CreateUserMessageAndReturnResponseResult {\n  messageByAiCoach {\n    message\n    senderType\n    messageId\n  }\n  chatSessionId\n  session {\n    id\n    status\n  }\n  recommendedActions @include(if: $recommendedActionsEnabled) {\n    action\n    actionMessage\n  }\n  clipRecommendations @include(if: $clipRecommendationsEnabled) {\n    ...AiCoachClipRecommendations\n  }\n  navigationButtons {\n    navigationLeadingMessage\n\n    ...GoToFirstItemNavigationButton\n  }\n}\n\nmutation AiCoach_CreateUserMessageAndReturnResponse(\n  $input: AiCoach_CreateUserMessageAndReturnResponseInput!\n  $recommendedActionsEnabled: Boolean = false\n  $clipRecommendationsEnabled: Boolean = false\n) {\n  AiCoach_CreateUserMessageAndReturnResponse(input: $input) {\n    ...CreateUserMessageResult\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wjFw").definitions)),n.definitions=n.definitions.concat(unique(e("J2jR").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function oneQuery(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.CreateUserMessageResult=oneQuery(n,"CreateUserMessageResult"),module.exports.AiCoach_CreateUserMessageAndReturnResponse=oneQuery(n,"AiCoach_CreateUserMessageAndReturnResponse")},j5nu:function(module,exports,e){},uSn8:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachNavigationButtons"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_NavigationButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationLeadingMessage"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},directives:[]}]}}],loc:{start:0,end:195}};n.loc.source={body:'#import "./aiCoachGoToFirstItemNavigationButtonFragment.graphql"\n\nfragment AiCoachNavigationButtons on AiCoach_NavigationButton {\n  navigationLeadingMessage\n\n  ...GoToFirstItemNavigationButton\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wjFw").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachNavigationButtons=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachNavigationButtons")},wBc2:function(module,exports){var e={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ItemMetadataFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemSlug"},arguments:[],directives:[]}]}}],loc:{start:0,end:100}};e.loc.source={body:"fragment ItemMetadataFields on AiCoach_ItemMetadata {\n  course {\n    slug\n  }\n  itemId\n  itemSlug\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.ItemMetadataFields=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"ItemMetadataFields")},wjFw:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_GoToFirstItemNavigationButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemMetadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_GenericItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_LectureItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachLectureItem"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ReadingItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachReadingItem"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_QuizItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numQuestions"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_AssignmentItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numQuestions"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:715}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n#import "./aiCoachReadingItemFragment.graphql"\n#import "./aiCoachLectureItemFragment.graphql"\n\nfragment GoToFirstItemNavigationButton on AiCoach_GoToFirstItemNavigationButton {\n  itemMetadata {\n    ... on AiCoach_GenericItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n    }\n    ... on AiCoach_LectureItemMetadata {\n      ...AiCoachLectureItem\n    }\n    ... on AiCoach_ReadingItemMetadata {\n      ...AiCoachReadingItem\n    }\n    ... on AiCoach_QuizItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n      numQuestions\n    }\n    ... on AiCoach_AssignmentItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n      numQuestions\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wBc2").definitions)),n.definitions=n.definitions.concat(unique(e("RNb2").definitions)),n.definitions=n.definitions.concat(unique(e("ZGIP").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.GoToFirstItemNavigationButton=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"GoToFirstItemNavigationButton")},wuXY:function(module,exports){var e={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachMessageCourse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Course_Course"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}],loc:{start:0,end:70}};e.loc.source={body:"fragment AiCoachMessageCourse on Course_Course {\n  id\n  slug\n  name\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoachMessageCourse=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoachMessageCourse")},xeAZ:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MessagesByChatIdResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ChatMessagesPaginatedResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalElements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userFeedback"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userComments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"senderType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"courseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"structuredResponse"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendedActions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionMessage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clipRecommendations"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachClipRecommendations"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigationButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachNavigationButtons"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AiCoach_ChatMessagesPaginatedResult"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"chatSessionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryByChatSessionId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"chatSessionId"},value:{kind:"Variable",name:{kind:"Name",value:"chatSessionId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MessagesByChatIdResult"},directives:[]}]}}]}}]}}],loc:{start:0,end:1052}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n#import "./aiCoachNavigationButtonsFragment.graphql"\n#import "./aiCoachClipRecommendationsFragment.graphql"\n\nfragment MessagesByChatIdResult on AiCoach_ChatMessagesPaginatedResult {\n  session {\n    id\n    status\n  }\n  pagination {\n    totalElements\n    cursor\n  }\n  elements {\n    userFeedback\n    userComments\n    senderType\n    message\n    itemId\n    createdAt\n    courseId\n    id\n    structuredResponse\n    recommendedActions @include(if: $recommendedActionsEnabled) {\n      actionMessage\n      action\n    }\n    clipRecommendations @include(if: $clipRecommendationsEnabled) {\n      ...AiCoachClipRecommendations\n    }\n    navigationButtons {\n      ...AiCoachNavigationButtons\n    }\n  }\n}\n\nquery AiCoach_ChatMessagesPaginatedResult(\n  $chatSessionId: ID!\n  $limit: Int!\n  $recommendedActionsEnabled: Boolean = false\n  $clipRecommendationsEnabled: Boolean = false\n) {\n  AiCoach {\n    queryByChatSessionId(chatSessionId: $chatSessionId, limit: $limit) {\n      ...MessagesByChatIdResult\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wBc2").definitions)),n.definitions=n.definitions.concat(unique(e("uSn8").definitions)),n.definitions=n.definitions.concat(unique(e("J2jR").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function oneQuery(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.MessagesByChatIdResult=oneQuery(n,"MessagesByChatIdResult"),module.exports.AiCoach_ChatMessagesPaginatedResult=oneQuery(n,"AiCoach_ChatMessagesPaginatedResult")}}]);
//# sourceMappingURL=57.2a3e554010b93508a83b.js.map